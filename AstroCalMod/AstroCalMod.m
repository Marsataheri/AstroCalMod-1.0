function varargout = AstroCalMod(varargin)
% Copyright: Marsa Taheri, 2020
% This is the code for AstroCalMod 1.0 GUI (Yu, Taheri, et al., 2020), a
% resource for using a computational model to study astrocyte calcium.
%
%
% UNTITLED MATLAB code for AstroCalMod.fig
%      UNTITLED, by itself, creates a new UNTITLED or raises the existing
%      singleton*.
%
%      H = UNTITLED returns the handle to a new UNTITLED or the handle to
%      the existing singleton*.
%
%      UNTITLED('CALLBACK',hObject,eventData,handles,...) calls the local
%      function named CALLBACK in UNTITLED.M with the given input arguments.
%
%      UNTITLED('Property','Value',...) creates a new UNTITLED or raises the
%      existing singleton*.  Starting from the left, property value pairs are
%      applied to the GUI before untitled_OpeningFcn gets called.  An
%      unrecognized property name or invalid value makes property application
%      stop.  All inputs are passed to untitled_OpeningFcn via varargin.


% Begin initialization code - DO NOT EDIT
gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
    'gui_Singleton',  gui_Singleton, ...
    'gui_OpeningFcn', @AstroCalMod_OpeningFcn, ...
    'gui_OutputFcn',  @AstroCalMod_OutputFcn, ...
    'gui_LayoutFcn',  @AstroCalMod_LayoutFcn, ...
    'gui_Callback',   []);
if nargin && ischar(varargin{1})
    gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
    gui_mainfcn(gui_State, varargin{:});
end
% End initialization code - DO NOT EDIT


% --- Executes just before untitled is made visible.
function AstroCalMod_OpeningFcn(hObject, eventdata, handles, varargin)
% This function has no output args, see OutputFcn.
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
% varargin   command line arguments to untitled (see VARARGIN)

%%To Create Data from Model:
addpath(genpath('CPa experiment functions'));
addpath(genpath('IP3-dependent functions'));
% addpath(genpath('Supporting functions'));

setappdata(0,'SavedUpperLimCPA',1.5)
setappdata(0,'SavedUpperLimIP3',1.5)
setappdata(0, 'AllIP3PlotParams',[])
setappdata(0, 'IP3Traces', [])
setappdata(0, 'AllCPAPlotParams',[])
setappdata(0, 'CPATraces', [])

handles.axes_PlotIP3depCaConc.YLabel.String = '[Ca^2^+]_c_y_t (\muM)';
set(handles.axes_PlotIP3depCaConc, 'FontUnits', 'normalized', 'Fontsize', 0.1, 'XLim',...
    [0 str2double(handles.TotalTime_entry.String)]);
handles.axes_PlotIP3depFluor.YLabel.String = 'Fluorescence (a.u.)';
set(handles.axes_PlotIP3depFluor, 'FontUnits', 'normalized', 'Fontsize', 0.1, 'XLim',...
    [0 str2double(handles.TotalTime_entry.String)]);
set(handles.axes_PlotIP3input, 'FontUnits', 'normalized', 'Fontsize', 0.1, 'XLim',...
    [0 str2double(handles.TotalTime_entry.String)]);

UpdateIP3Input

handles.TotalCPATime = str2double(handles.CPASimTime_entry.String);
handles.axes_CPACaConc.YLabel.String = '[Ca^2^+]_c_y_t (\muM)';
handles.axes_CPAFluor.YLabel.String = 'Fluorescence (a.u.)';
set(handles.axes_CPACaConc, 'FontUnits', 'normalized', 'Fontsize', 0.1, 'XLim', [0 handles.TotalCPATime]);
set(handles.axes_CPAFluor, 'FontUnits', 'normalized', 'Fontsize', 0.1, 'XLim', [0 handles.TotalCPATime]);
set(handles.CPATimeLine_axes, 'FontUnits', 'normalized', 'Fontsize', 0.1, 'XLim', [0 handles.TotalCPATime]);

UpdateCPAExpLines %Updates the line locations above the graph for CPA experiments

handles.IntrinsicParamsInitial = [10,...
    0.785, 0.9, 0.222, 0.002/1.5,...
    0.05, 1.2];
handles.ICsInitial = [0.0615, 37.4192, 0.7017];%, 0.0047];
setappdata(0,'CurrentIntrinParams', handles.IntrinsicParamsInitial);
setappdata(0, 'CurrentICs', handles.ICsInitial)
% Choose default command line output for untitled
handles.output = hObject;


handles.vPMCA_slider.Value = handles.IntrinsicParamsInitial(1);
handles.vSOC_slider.Value = handles.IntrinsicParamsInitial(2);
handles.slider_vserca.Value = handles.IntrinsicParamsInitial(3);
handles.vip3r_slider.Value = handles.IntrinsicParamsInitial(4);
handles.slider_vERleak.Value = handles.IntrinsicParamsInitial(5);
handles.slider_addEntry.Value = handles.IntrinsicParamsInitial(6);
handles.slider_AddExtrusion.Value = handles.IntrinsicParamsInitial(7);


setappdata(0,'NofIP3Traces', 0); %for setting the colors and params of each trace that's superimposed
setappdata(0,'NofCPATraces', 0);
%Colors for plotting and legend:
handles.ColorList = [0    0.4470    0.7410;...
    0.2    0.2    0.6;...
    0  0.75  0.8;...
    0.65    0.5   0.7;...
    0.929    0.694    0.125];%up to 5 overlaps total 

% Update handles structure
guidata(hObject, handles);

% UIWAIT makes untitled wait for user response (see UIRESUME)
% uiwait(handles.figure1);


% --- Outputs from this function are returned to the command line.
function varargout = AstroCalMod_OutputFcn(hObject, eventdata, handles)
% varargout  cell array for returning output args (see VARARGOUT);
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Get default command line output from handles structure
varargout{1} = handles.output;

% --- Executes on button press in pushbutton_UpdateIP3EvokedTraces.
function pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton_UpdateIP3EvokedTraces (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

%Automatically save parameter info and display, though list may be
%invisible
if getappdata(0,'NofIP3Traces')>=5 %cannot plot more than 5 traces
    errordlg(['Cannot plot more than 5 superimposed traces. Please',...
        ' remove previous traces and start over.'], 'ERROR: Too Many IP3-dep. Traces');
else
    if handles.checkbox_superimp.Value==0
        setappdata(0,'NofIP3Traces', 1);
        
        handles.listbox_IP3.Visible='on';
        handles.pushbutton_Qip3.Visible='on';
        handles.text_legendIP3.Visible='on';
    else
        setappdata(0,'NofIP3Traces', getappdata(0,'NofIP3Traces')+1);
        
        handles.listbox_IP3.Visible='on';
        handles.pushbutton_Qip3.Visible='on';
        handles.text_legendIP3.Visible='on';
    end
    
    
    DataName = ['Param. Set ', num2str(getappdata(0,'NofIP3Traces'))];
    DataColor = round(255.*handles.ColorList(getappdata(0,'NofIP3Traces'), :));%[0 4 200];
    pre = '<HTML><FONT color="';
    post = '</FONT></HTML>';
    strAndInfo = [pre rgb2Hex(DataColor) '">' DataName post];
    if handles.checkbox_superimp.Value==0
        handles.listbox_IP3.String = strAndInfo;
    else
        handles.listbox_IP3.String = [handles.listbox_IP3.String;...
            strAndInfo];
        handles.listbox_IP3.Value=1;
    end
    
    %Update the astrocyte's intrinsic parameter values from GUI:
    IntrinsicParams = [handles.vPMCA_slider.Value,...
        handles.vSOC_slider.Value, handles.slider_vserca.Value,...
        handles.vip3r_slider.Value, handles.slider_vERleak.Value,...
        handles.slider_addEntry.Value, handles.slider_AddExtrusion.Value];
    if sum(handles.IntrinsicParamsInitial == IntrinsicParams)==length(IntrinsicParams)
        %Don't recalculate ICs if user reset params "manually":
        x0 = handles.ICsInitial;
        setappdata(0,'CurrentICs',x0)
        setappdata(0,'CurrentIntrinParams', IntrinsicParams);
    elseif sum(getappdata(0,'CurrentIntrinParams') == IntrinsicParams)<length(IntrinsicParams)
        %If the Intrinsic parameters have changed from the default OR
        %the values used in the last simulation
        InProgressICs = waitbar(0.3, {'PLEASE WAIT';'Finding Initial Conditions in Model'},...
            'Name', 'In Progress: Initial Conditions', 'windowstyle', 'modal');
        x0 = findIC(IntrinsicParams, getappdata(0, 'CurrentICs')); %initial conditions
        %Set the new current ICs and the new Intrinsic Parameters
        delete(InProgressICs)
        setappdata(0,'CurrentICs',x0)
        setappdata(0,'CurrentIntrinParams', IntrinsicParams);
    else
        %if current parameters didn't change at all
        x0 = getappdata(0, 'CurrentICs');
    end
    
    InProgress = waitbar(0.7, {'PLEASE WAIT';'Updating Traces'},...
        'Name', 'In Progress: Running Simulation', 'windowstyle', 'modal');
    handles.IP3params(1) = str2double(handles.PeakAmp_entry.String);
    handles.IP3params(2) = str2double(handles.RiseDur_entry.String);
    handles.IP3params(3) = str2double(handles.RiseRate_entry.String);
    handles.IP3params(4) = str2double(handles.DecDur_entry.String);
    
    TotalTime = str2double(handles.TotalTime_entry.String);
    IP3inputTime = str2double(handles.IP3input_entry.String);
    [CaCyt, t, Fluor, ~]=AstroModel(handles.IP3params,...
        TotalTime, IP3inputTime, IntrinsicParams, x0);
    delete(InProgress)
    
    
    axes(handles.axes_PlotIP3depCaConc); plot(t, CaCyt,'linewidth', 2,...
        'color', handles.ColorList(getappdata(0,'NofIP3Traces'), :));
    UpperLim=max([1.5, getappdata(0,'SavedUpperLimIP3')]);
    Yupper=max([max(CaCyt)*1.05, UpperLim]);
    set(handles.axes_PlotIP3depCaConc, 'xlim', [0 TotalTime],...
        'XTick', [], 'FontUnits', 'normalized', 'Fontsize', 0.1,...
        'ylim', [0 Yupper], 'ytick', 0:0.5:ceil(Yupper));
    handles.axes_PlotIP3depCaConc.YLabel.String = '[Ca^2^+]_c_y_t (\muM)';
    temp=get(handles.axes_PlotIP3depCaConc);
    if handles.checkbox_superimp.Value==1
        hold on
        setappdata(0,'SavedUpperLimIP3',Yupper)
        handles.listbox_IP3.Visible='on';
        %Remove the default selection:
        handles.listbox_IP3.Max=2; %Max - Min > 1
        handles.listbox_IP3.Value=[];
    else
        hold off
        handles.listbox_IP3.Visible='on';%%
        %Remove the default selection:
        handles.listbox_IP3.Max=2; %Max - Min > 1
        handles.listbox_IP3.Value=[];
    end
    
    axes(handles.axes_PlotIP3depFluor); plot(t, Fluor,'linewidth', 2,...
        'color', handles.ColorList(getappdata(0,'NofIP3Traces'), :));
    set(handles.axes_PlotIP3depFluor, 'ylim', [0 1], 'xlim', [0 TotalTime],...
        'FontUnits', 'normalized', 'Fontsize', 0.1,...
        'ytick', 0:0.5:1, 'yticklabel', 0:0.5:1) %'XTick', [],
    handles.axes_PlotIP3depFluor.YLabel.String = 'Fluorescence (a.u.)';
    temp=get(handles.axes_PlotIP3depFluor);%corrects fontsizes
    if handles.checkbox_superimp.Value==1
        hold on
    else
        hold off
    end
    
    %Save all parameters for export or plotting info:
    %[vPMCA, vSOC, vin, kout, vSERCA, vIP3R, vERleak, IP3start, IP3peak, IP3rr, IP3dr, IP3dd]
    NewIP3PlotParams = [handles.vPMCA_slider.Value,...
        handles.vSOC_slider.Value, handles.slider_addEntry.Value,...
        handles.slider_AddExtrusion.Value, handles.slider_vserca.Value,...
        handles.vip3r_slider.Value, handles.slider_vERleak.Value,...
        IP3inputTime, handles.IP3params];
    
    if handles.checkbox_superimp.Value==0
        setappdata(0, 'AllIP3PlotParams', NewIP3PlotParams);
        setappdata(0, 'IP3Traces',...
            [t(1:25:end), CaCyt(1:25:end), Fluor(1:25:end)])
    else
        setappdata(0, 'AllIP3PlotParams',...
            [getappdata(0, 'AllIP3PlotParams'); NewIP3PlotParams]);
        
        
        %First pad with NaNs if lengths of data are different: 
        Replace_t = t(1:25:end);
        Replace_CaCyt = CaCyt(1:25:end);
        Replace_Fluor = Fluor(1:25:end);
        DiffL = length(t(1:25:end)) - size(getappdata(0, 'IP3Traces'),1);
        colN = size(getappdata(0, 'CPATraces'), 2);
        if DiffL>0
            setappdata(0, 'IP3Traces', [getappdata(0, 'IP3Traces'); nan(DiffL,colN)])
        elseif DiffL<0
            Replace_t = [t(1:25:end); nan(-DiffL,1)];
            Replace_CaCyt = [CaCyt(1:25:end); nan(-DiffL,1)];
            Replace_Fluor = [Fluor(1:25:end); nan(-DiffL,1)];
        end        
        setappdata(0, 'IP3Traces',...
            [getappdata(0, 'IP3Traces'),...
            Replace_t, Replace_CaCyt, Replace_Fluor])
    end
end


% --- Executes during object creation, after setting all properties.
function figure1_CreateFcn(hObject, eventdata, handles)
% hObject    handle to figure1 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called


function PeakAmp_entry_Callback(hObject, eventdata, handles)
% hObject    handle to PeakAmp_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of PeakAmp_entry as text
%        str2double(get(hObject,'String')) returns contents of PeakAmp_entry as a double

UpdateIP3Input


% --- Executes during object creation, after setting all properties.
function PeakAmp_entry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to PeakAmp_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function TotalTime_entry_Callback(hObject, eventdata, handles)
% hObject    handle to TotalTime_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of TotalTime_entry as text
%        str2double(get(hObject,'String')) returns contents of TotalTime_entry as a double
UpdateIP3Input
set(handles.axes_PlotIP3depCaConc, 'XLim',...
    [0 str2double(handles.TotalTime_entry.String)]);
set(handles.axes_PlotIP3depFluor, 'XLim',...
    [0 str2double(handles.TotalTime_entry.String)]);
set(handles.axes_PlotIP3input, 'XLim',...
    [0 str2double(handles.TotalTime_entry.String)]);


% --- Executes during object creation, after setting all properties.
function TotalTime_entry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to TotalTime_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function IP3input_entry_Callback(hObject, eventdata, handles)
% hObject    handle to IP3input_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of IP3input_entry as text
%        str2double(get(hObject,'String')) returns contents of IP3input_entry as a double
UpdateIP3Input


% --- Executes during object creation, after setting all properties.
function IP3input_entry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to IP3input_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


% --- Executes on slider movement.
function vSOC_slider_Callback(hObject, eventdata, handles)
% hObject    handle to vSOC_slider (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'Value') returns position of slider
%        get(hObject,'Min') and get(hObject,'Max') to determine range of slider

handles.vSOC_entry.String = handles.vSOC_slider.Value;
% if handles.radiobutton_AutoUpdate.Value==1
%     set(hObject, 'enable', 'inactive')
%     handles.vSOC_entry.String = handles.vSOC_slider.Value;
%     
%     if getappdata(0,'NofIP3Traces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many IP3-dep. Traces');
%     else
% %         handles.vSOC_entry.String
% %         handles.vSOC_slider.Value
%         pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     end
%     
%     if getappdata(0,'NofCPATraces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many CPA-dep. Traces');
%     else
% %         handles.vSOC_entry.String
% %         handles.vSOC_slider.Value
%         UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
%     end
%     
%     pause(4)
%     set(hObject, 'enable', 'on') %Possibly add it to the callbacks above & remove pause
% end


% --- Executes during object creation, after setting all properties.
function vSOC_slider_CreateFcn(hObject, eventdata, handles)
% hObject    handle to vSOC_slider (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: slider controls usually have a light gray background.
if isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor',[.9 .9 .9]);
end


function vSOC_entry_Callback(hObject, eventdata, handles)
% hObject    handle to vSOC_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of vSOC_entry as text
%        str2double(get(hObject,'String')) returns contents of vSOC_entry as a double

if str2double(handles.vSOC_entry.String)>get(handles.vSOC_slider, 'Max')
    handles.vSOC_entry.String = get(handles.vSOC_slider, 'Max');
    msgbox(['Maximum value is ', num2str(get(handles.vSOC_slider, 'Max'))],...
        'Error','error');
elseif str2double(handles.vSOC_entry.String)<get(handles.vSOC_slider, 'Min')
    handles.vSOC_entry.String = get(handles.vSOC_slider, 'Min');
    msgbox(['Minimum value is ', num2str(get(handles.vSOC_slider, 'Min'))],...
        'Error','error');
end
handles.vSOC_slider.Value = str2double(handles.vSOC_entry.String);

% if handles.radiobutton_AutoUpdate.Value==1
%     pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
% end


% --- Executes during object creation, after setting all properties.
function vSOC_entry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to vSOC_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function DecDur_entry_Callback(hObject, eventdata, handles)
% hObject    handle to DecDur_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of DecDur_entry as text
%        str2double(get(hObject,'String')) returns contents of DecDur_entry as a double
UpdateIP3Input


% --- Executes during object creation, after setting all properties.
function DecDur_entry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to DecDur_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function RiseRate_entry_Callback(hObject, eventdata, handles)
% hObject    handle to RiseRate_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of RiseRate_entry as text
%        str2double(get(hObject,'String')) returns contents of RiseRate_entry as a double
UpdateIP3Input


% --- Executes during object creation, after setting all properties.
function RiseRate_entry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to RiseRate_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function RiseDur_entry_Callback(hObject, eventdata, handles)
% hObject    handle to RiseDur_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of RiseDur_entry as text
%        str2double(get(hObject,'String')) returns contents of RiseDur_entry as a double
UpdateIP3Input

% --- Executes during object creation, after setting all properties.
function RiseDur_entry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to RiseDur_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


% --- Executes on slider movement.
function vPMCA_slider_Callback(hObject, eventdata, handles)
% hObject    handle to vPMCA_slider (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'Value') returns position of slider
%        get(hObject,'Min') and get(hObject,'Max') to determine range of slider
handles.vPMCA_entry.String = handles.vPMCA_slider.Value;
% if handles.radiobutton_AutoUpdate.Value==1
%     set(hObject, 'enable', 'inactive')
%     handles.vPMCA_entry.String = handles.vPMCA_slider.Value;
%     
%     if getappdata(0,'NofIP3Traces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many IP3-dep. Traces');
%     else
%         pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     end
%     
%     if getappdata(0,'NofCPATraces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many CPA-dep. Traces');
%     else
%         UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
%     end
%     
%     pause(4)
%     set(hObject, 'enable', 'on')
% end


% --- Executes during object creation, after setting all properties.
function vPMCA_slider_CreateFcn(hObject, eventdata, handles)
% hObject    handle to vPMCA_slider (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: slider controls usually have a light gray background.
if isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor',[.9 .9 .9]);
end


function vPMCA_entry_Callback(hObject, eventdata, handles)
% hObject    handle to vPMCA_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of vPMCA_entry as text
%        str2double(get(hObject,'String')) returns contents of vPMCA_entry as a double
if str2double(handles.vPMCA_entry.String)>get(handles.vPMCA_slider, 'Max')
    handles.vPMCA_entry.String = get(handles.vPMCA_slider, 'Max');
    msgbox(['Maximum value is ', num2str(get(handles.vPMCA_slider, 'Max'))],...
        'Error','error');
elseif str2double(handles.vPMCA_entry.String)<get(handles.vPMCA_slider, 'Min')
    handles.vPMCA_entry.String = get(handles.vPMCA_slider, 'Min');
    msgbox(['Minimum value is ', num2str(get(handles.vPMCA_slider, 'Min'))],...
        'Error','error');
end
handles.vPMCA_slider.Value = str2double(handles.vPMCA_entry.String);
% if handles.radiobutton_AutoUpdate.Value==1
%     pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
% end


% --- Executes during object creation, after setting all properties.
function vPMCA_entry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to vPMCA_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


% --- Executes on button press in radiobutton_AutoUpdate.
% function radiobutton_AutoUpdate_Callback(hObject, eventdata, handles)
% % hObject    handle to radiobutton_AutoUpdate (see GCBO)
% % eventdata  reserved - to be defined in a future version of MATLAB
% % handles    structure with handles and user data (see GUIDATA)
% 
% % Hint: get(hObject,'Value') returns toggle state of radiobutton_AutoUpdate
% set(handles.radiobutton_ManualUpdate,'value',0)
% set(handles.radiobutton_AutoUpdate,'value',1)
% handles.pushbutton_UpdateIP3EvokedTraces.Enable = 'off';
% handles.UpdateCPA_pushbutton.Enable = 'off';

% --- Executes on button press in radiobutton_ManualUpdate.
function radiobutton_ManualUpdate_Callback(hObject, eventdata, handles)
% hObject    handle to radiobutton_ManualUpdate (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hint: get(hObject,'Value') returns toggle state of radiobutton_ManualUpdate
% set(handles.radiobutton_AutoUpdate,'value',0)
set(handles.radiobutton_ManualUpdate,'value',1)
handles.pushbutton_UpdateIP3EvokedTraces.Enable = 'on';
handles.UpdateCPA_pushbutton.Enable = 'on';

% --- Executes on button press in pushbutton_ResetIntrParams.
function pushbutton_ResetIntrParams_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton_ResetIntrParams (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hint: get(hObject,'Value') returns toggle state of pushbutton_ResetIntrParams
IntrinsicParamsInitial = [10, 0.7850, 0.9, 0.222, 0.002/1.5,...
    0.05, 1.2];
%Reset sliders:
handles.vPMCA_slider.Value = IntrinsicParamsInitial(1);
handles.vSOC_slider.Value = IntrinsicParamsInitial(2);
handles.slider_vserca.Value = IntrinsicParamsInitial(3);
handles.vip3r_slider.Value = IntrinsicParamsInitial(4);
handles.slider_vERleak.Value = IntrinsicParamsInitial(5);
handles.slider_addEntry.Value = IntrinsicParamsInitial(6);
handles.slider_AddExtrusion.Value = IntrinsicParamsInitial(7);
%Reset strings in value boxes:
handles.vPMCA_entry.String = IntrinsicParamsInitial(1);
handles.vSOC_entry.String = IntrinsicParamsInitial(2);
handles.edit_vserca.String = IntrinsicParamsInitial(3);
handles.edit_vip3r.String = IntrinsicParamsInitial(4);
handles.edit_ERleak.String = IntrinsicParamsInitial(5);
handles.edit_vin.String = IntrinsicParamsInitial(6);
handles.edit_kout.String = IntrinsicParamsInitial(7);

%If the user resets the parameters, there's no need to recalculate ICs:
setappdata(0,'CurrentIntrinParams', IntrinsicParamsInitial);
ICsInitial = [0.0615, 37.4192, 0.7017];%, 0.0047];
setappdata(0, 'CurrentICs', ICsInitial)


% --- Executes on button press in pushbutton_Save.
function pushbutton_Save_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton_Save (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

if isempty(getappdata(0, 'AllIP3PlotParams')) && isempty(getappdata(0, 'AllCPAPlotParams')) %otherwise there's nothing to save
    msgbox('No data has been generated to save. Please first generate traces.',...
        'Error');
else
    if handles.popupmenu_SaveAs.Value==1
        msgbox('Before saving the data, you must select a format.',...
            'Select Format');
    else
        SaveName = inputdlg('Enter the file name to save as:', 'SAVE AS', [1 50]);
        
        if sum(size(SaveName))~=0 %if the user did not press cancel/close on dialog box
            if ~isempty(SaveName{1}) %if user entered something as the save name, rather than only clicking Ok
                if ~isempty(getappdata(0, 'AllIP3PlotParams'))
                    IP3_Param_Values = getappdata(0, 'AllIP3PlotParams')';
                    T_IP3params = table({'vPMCA'; 'vSOC'; 'vin'; 'kout'; 'vSERCA'; 'vIP3R'; 'vERleak';...
                        'IP3 start'; 'IP3 peak'; 'IP3 r_rise'; 'IP3 d_rise'; 'IP3 d_dec'},...
                        IP3_Param_Values, 'VariableNames', {'Params'; 'Values'});
                    IP3_Trace_Values= getappdata(0, 'IP3Traces');
                    count=0;
                    for n=1:3:size(IP3_Trace_Values,2)
                        count=count+1;
                        
                        structfieldT = strcat('Time_',num2str(count));
                        structfieldC = strcat('CaConc_',num2str(count));
                        structfieldF = strcat('Fluor_',num2str(count));
                        IP3variable.(structfieldT) = IP3_Trace_Values(:, 1+(n-1));
                        IP3variable.(structfieldC) = IP3_Trace_Values(:, 2+(n-1));
                        IP3variable.(structfieldF) = IP3_Trace_Values(:, 3+(n-1));
                        %                 my_field = strcat('Time_CaConc_Fluor_',num2str(count));
                        %                 variable.(my_field) = IP3_Trace_Values(:, (1:3)+(n-1));
                    end
                    T_IP3traces = struct2table(IP3variable);
                    
                    
                    if handles.popupmenu_SaveAs.Value==2
                        save([SaveName{1}, '_IP3dep'], 'IP3_Param_Values', 'IP3_Trace_Values',...
                            'T_IP3params', 'T_IP3traces');
                        
                    elseif handles.popupmenu_SaveAs.Value==3
                        writetable(T_IP3params,[SaveName{1},'_IP3params.txt'],...
                            'QuoteStrings', true, 'DeLimiter', ',');
                        writetable(T_IP3traces,[SaveName{1},'_IP3dep_traces.txt'],...
                            'QuoteStrings', true, 'DeLimiter', ',');
                        
                    elseif handles.popupmenu_SaveAs.Value==4
                        Range1='A2';
                        % [status, message]=xlswrite([SaveName{1},'_IP3dep.xlsx'], IP3_Param_Values, 2, Range1);
                        % xlswrite([SaveName{1},'_IP3dep.xlsx'], IP3_Trace_Values, 1, Range1);
                        writetable(T_IP3params,[SaveName{1},'_IP3dep.xlsx'], 'Sheet', 'Params', 'Range', Range1)
                        writetable(T_IP3traces,[SaveName{1},'_IP3dep.xlsx'], 'Sheet', 'Traces', 'Range', Range1);
                    
                    elseif handles.popupmenu_SaveAs.Value==5
                        writetable(T_IP3params,[SaveName{1},'_IP3params.csv'])
                        writetable(T_IP3traces,[SaveName{1},'_IP3dep_traces.csv']);
                    end
                end
                
                if ~isempty(getappdata(0, 'AllCPAPlotParams'))
                    CPA_Param_Values = getappdata(0, 'AllCPAPlotParams')';
                    T_CPAparams = table({'vPMCA'; 'vSOC'; 'vin'; 'kout'; 'vSERCA'; 'vIP3R'; 'vERleak';...
                        'Ca-Free start'; 'CPA start'; 'Ca-Free end'},...
                        CPA_Param_Values, 'VariableNames', {'Params'; 'Values'});
                    CPA_Trace_Values= getappdata(0, 'CPATraces');
                    count=0;
                    for n=1:3:size(CPA_Trace_Values,2)
                        count=count+1;
                        
                        structfieldT = strcat('Time_',num2str(count));
                        structfieldC = strcat('CaConc_',num2str(count));
                        structfieldF = strcat('Fluor_',num2str(count));
                        CPAvariable.(structfieldT) = CPA_Trace_Values(:, 1+(n-1));
                        CPAvariable.(structfieldC) = CPA_Trace_Values(:, 2+(n-1));
                        CPAvariable.(structfieldF) = CPA_Trace_Values(:, 3+(n-1));
                    end
                    T_CPAtraces = struct2table(CPAvariable);
                    
                    if handles.popupmenu_SaveAs.Value==2
                        save([SaveName{1}, '_CPAdep'], 'CPA_Param_Values', 'CPA_Trace_Values',...
                            'T_CPAparams', 'T_CPAtraces');
                        
                    elseif handles.popupmenu_SaveAs.Value==3
                        writetable(T_CPAparams,[SaveName{1},'_CPAparams.txt'],...
                            'QuoteStrings', true, 'DeLimiter', '|');
                        writetable(T_CPAtraces,[SaveName{1},'_CPAdep_traces.txt'],...
                            'QuoteStrings', true, 'DeLimiter', '|');
                        
                    elseif handles.popupmenu_SaveAs.Value==4
                        Range1='A2';
                        % xlswrite([SaveName{1},'_CPAdep.xlsx'], CPA_Param_Values, 2, Range1);
                        % xlswrite([SaveName{1},'_CPAdep.xlsx'], CPA_Trace_Values, 1, Range1);
                        writetable(T_CPAparams,[SaveName{1},'_CPAdep.xlsx'], 'Sheet', 'Params', 'Range', Range1)
                        writetable(T_CPAtraces,[SaveName{1},'_CPAdep.xlsx'], 'Sheet', 'Traces', 'Range', Range1);
  
                    elseif handles.popupmenu_SaveAs.Value==5
                        writetable(T_CPAparams,[SaveName{1},'_CPAparams.csv'])
                        writetable(T_CPAtraces,[SaveName{1},'_CPAdep_traces.csv']);
                    end
                end
            end
        end
    end
end


% --- Executes on selection change in popupmenu_SaveAs.
function popupmenu_SaveAs_Callback(hObject, eventdata, handles)
% hObject    handle to popupmenu_SaveAs (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: contents = cellstr(get(hObject,'String')) returns popupmenu_SaveAs contents as cell array
%        contents{get(hObject,'Value')} returns selected item from popupmenu_SaveAs


% --- Executes during object creation, after setting all properties.
function popupmenu_SaveAs_CreateFcn(hObject, eventdata, handles)
% hObject    handle to popupmenu_SaveAs (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: popupmenu controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


% --- Executes on button press in pushbutton3.
function pushbutton3_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton3 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)



function edit11_Callback(hObject, eventdata, handles)
% hObject    handle to edit11 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of edit11 as text
%        str2double(get(hObject,'String')) returns contents of edit11 as a double


% --- Executes during object creation, after setting all properties.
function edit11_CreateFcn(hObject, eventdata, handles)
% hObject    handle to edit11 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


% --- Executes on button press in pushbutton4.
function pushbutton4_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton4 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)


% --- Executes on button press in UpdateCPA_pushbutton.
function UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
% hObject    handle to UpdateCPA_pushbutton (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

if getappdata(0,'NofCPATraces')>=5 %cannot plot more than 5 traces
    errordlg(['Cannot plot more than 5 superimposed traces. Please',...
        ' remove previous traces and start over.'], 'ERROR: Too Many CPA-dep. Traces');
else    
    if str2double(handles.CPASimTime_entry.String) <= str2double(handles.edit_CaFreeEnd.String)
        msgbox('''Total Simulation Duration'' must be after ''Calcium Free End Time''. Please correct.',...
            'Error','error');
    elseif str2double(handles.edit_CPAStart.String) >= str2double(handles.edit_CaFreeEnd.String)
        msgbox('''CPA Start Time'' must be before ''Calcium Free End Time''. Please correct.',...
            'Error','error');
    elseif str2double(handles.edit_CPAStart.String) <= str2double(handles.edit_CaFreeStart.String)
        msgbox('''CPA Start Time'' must be after ''Calcium Free Start Time''. Please correct.',...
            'Error','error');
    else
        
        if handles.checkbox_superimp.Value==0
            setappdata(0,'NofCPATraces', 1);
            %include a listbox with the 1 param:
            handles.listbox_CPA.Visible='on';
            handles.pushbutton_Qcpa.Visible='on';
            handles.text_legendCPA.Visible='on';
            %Remove the default selection from the listbox:
            handles.listbox_CPA.Max=2; %Max - Min > 1
            handles.listbox_CPA.Value=[];
        else
            setappdata(0,'NofCPATraces', getappdata(0,'NofCPATraces')+1);
            handles.listbox_CPA.Visible='on';
            handles.pushbutton_Qcpa.Visible='on';
            handles.text_legendCPA.Visible='on';
        end
        
        DataName = ['Param. Set ', num2str(getappdata(0,'NofCPATraces'))];
        DataColor = round(255.*handles.ColorList(getappdata(0,'NofCPATraces'), :));
        pre = '<HTML><FONT color="';
        post = '</FONT></HTML>';
        strAndInfo = [pre rgb2Hex(DataColor) '">' DataName post];
        if handles.checkbox_superimp.Value==0
            handles.listbox_CPA.String = strAndInfo;
            
            %Remove the default selection from the listbox:
            handles.listbox_CPA.Max=2; %Max - Min > 1
            handles.listbox_CPA.Value=[];
        else
            handles.listbox_CPA.String = [handles.listbox_CPA.String;...
                strAndInfo];
%             handles.listbox_CPA.Value=1;
            
            %Remove the default selection from the listbox:
            handles.listbox_CPA.Max=2; %Max - Min > 1
            handles.listbox_CPA.Value=[];
        end
        
        %Update the astrocyte's intrinsic parameter values from GUI:
        IntrinsicParams = [handles.vPMCA_slider.Value,...
            handles.vSOC_slider.Value, handles.slider_vserca.Value,...
            handles.vip3r_slider.Value, handles.slider_vERleak.Value,...
            handles.slider_addEntry.Value, handles.slider_AddExtrusion.Value];
        if sum(handles.IntrinsicParamsInitial == IntrinsicParams)==length(IntrinsicParams)
            %Don't recalculate ICs if user reset params "manually":
            x0 = handles.ICsInitial;
            setappdata(0,'CurrentICs',x0)
            setappdata(0,'CurrentIntrinParams', IntrinsicParams);
        elseif sum(getappdata(0,'CurrentIntrinParams') == IntrinsicParams)<length(IntrinsicParams)
            %If the Intrinsic parameters have changed from the default OR
            %the values used in the last simulation
            InProgressICs = waitbar(0.3, {'PLEASE WAIT';'Finding Initial Conditions in Model'},...
                'Name', 'In Progress: Initial Conditions', 'windowstyle', 'modal');
            x0 = findIC(IntrinsicParams, getappdata(0, 'CurrentICs')); %initial conditions
            %Set the new current ICs and the new Intrinsic Parameters
            delete(InProgressICs)
            setappdata(0,'CurrentICs',x0)
            setappdata(0,'CurrentIntrinParams', IntrinsicParams);
        else
            %if current parameters didn't change at all
            x0 = getappdata(0, 'CurrentICs');
        end
        
        InProgress = waitbar(0.6, {'PLEASE WAIT';'Updating Traces'},...
            'Name', 'In Progress: Running Simulation', 'windowstyle', 'modal');
        handles.IP3params(1) = str2double(handles.PeakAmp_entry.String);
        handles.IP3params(2) = str2double(handles.RiseDur_entry.String);
        handles.IP3params(3) = str2double(handles.RiseRate_entry.String);
        handles.IP3params(4) = str2double(handles.DecDur_entry.String);
        
        PhaseIend = str2double(handles.edit_CaFreeStart.String); % = PhaseIIstart
        PhaseIIend = str2double(handles.edit_CPAStart.String); % = PhaseIIIstart
        PhaseIIIend = str2double(handles.edit_CaFreeEnd.String); % = PhaseIVstart
        
        TotalTime = str2double(handles.CPASimTime_entry.String);
        [CaCyt, t, Fluor,CaTot,...
            h_IP3R] = StoreAndEntry_simulation(PhaseIend,...
            PhaseIIend, PhaseIIIend, TotalTime, IntrinsicParams, x0);
        delete(InProgress)
        
        
        axes(handles.axes_CPACaConc); plot(t, CaCyt,'linewidth', 2,...
            'color', handles.ColorList(getappdata(0,'NofCPATraces'), :))
        UpperLim=max([1.5,  getappdata(0,'SavedUpperLimCPA')]);
        Yupper=max([max(CaCyt)*1.05, UpperLim]);
        if Yupper<4; StepSz=0.5; else StepSz=1; end
        set(handles.axes_CPACaConc, 'xlim', [0 TotalTime],...
            'XTick', [], 'FontUnits', 'normalized', 'Fontsize', 0.1,...
            'ylim', [0 Yupper], 'ytick', 0:StepSz:ceil(Yupper))
        handles.axes_CPACaConc.YLabel.String = '[Ca^2^+]_c_y_t (\muM)';
        temp=get(handles.axes_CPACaConc);
        if handles.checkbox_superimp.Value==1
            hold on
            setappdata(0,'SavedUpperLimCPA',Yupper)
            handles.listbox_CPA.Visible='on';
        else
            hold off
        end
        
        axes(handles.axes_CPAFluor); plot(t, Fluor,'linewidth', 2,...
            'color', handles.ColorList(getappdata(0,'NofCPATraces'), :));
        
        handles.axes_CPAFluor.YLabel.String = 'Fluorescence (a.u.)';
        set(handles.axes_CPAFluor.YLabel,...
            'fontunits', 'normalized', 'fontsize',0.1,'fontname', 'default');
        set(handles.axes_CPAFluor, 'ylim', [0 1], 'xlim', [0 TotalTime],...
            'FontUnits', 'normalized', 'Fontsize', 0.1,...
            'ytick', 0:0.5:1, 'yticklabel', 0:0.5:1,...
            'fontname','default') %'XTick', [],
        temp=get(handles.axes_CPAFluor);
        if handles.checkbox_superimp.Value==1
            hold on
        else
            hold off
        end

    %Save all parameters for export or plotting info:
    %[vPMCA, vSOC, vin, kout, vSERCA, vIP3R, vERleak, IP3start, IP3peak, IP3rr, IP3dr, IP3dd]
    NewCPAPlotParams = [handles.vPMCA_slider.Value,...
        handles.vSOC_slider.Value, handles.slider_addEntry.Value,...
        handles.slider_AddExtrusion.Value, handles.slider_vserca.Value,...
        handles.vip3r_slider.Value, handles.slider_vERleak.Value,...
        str2double(handles.edit_CaFreeStart.String),...
        str2double(handles.edit_CPAStart.String),...
        str2double(handles.edit_CaFreeEnd.String)];
    
    if handles.checkbox_superimp.Value==0
        setappdata(0, 'AllCPAPlotParams', NewCPAPlotParams);
        setappdata(0, 'CPATraces',...
            [t(1:25:end), CaCyt(1:25:end), Fluor(1:25:end)])
    else
        setappdata(0, 'AllCPAPlotParams',...
            [getappdata(0, 'AllCPAPlotParams'); NewCPAPlotParams]);
        
        %First pad with NaNs if lengths of data are different: 
        Replace_t = t(1:25:end);
        Replace_CaCyt = CaCyt(1:25:end);
        Replace_Fluor = Fluor(1:25:end);
        DiffL = length(t(1:25:end)) - size(getappdata(0, 'CPATraces'),1);
        colN = size(getappdata(0, 'CPATraces'), 2);
        if DiffL>0
            setappdata(0, 'CPATraces', [getappdata(0, 'CPATraces'); nan(DiffL,colN)])
        elseif DiffL<0
            Replace_t = [t(1:25:end); nan(-DiffL,1)];
            Replace_CaCyt = [CaCyt(1:25:end); nan(-DiffL,1)];
            Replace_Fluor = [Fluor(1:25:end); nan(-DiffL,1)];
        end
        setappdata(0, 'CPATraces',...
            [getappdata(0, 'CPATraces'),...
            Replace_t, Replace_CaCyt, Replace_Fluor])        
    end
    
    end
end

function CPASimTime_entry_Callback(hObject, eventdata, handles)
% hObject    handle to CPASimTime_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of CPASimTime_entry as text

UpdateCPAExpLines
set(handles.axes_CPACaConc, 'XLim',...
    [0 str2double(handles.CPASimTime_entry.String)]);
set(handles.axes_CPAFluor, 'XLim',...
    [0 str2double(handles.CPASimTime_entry.String)]);
set(handles.CPATimeLine_axes, 'XLim',...
    [0 str2double(handles.CPASimTime_entry.String)]);


% --- Executes during object creation, after setting all properties.
function CPASimTime_entry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to CPASimTime_entry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


% --- Executes on mouse press over axes background.
function CPATimeLine_axes_ButtonDownFcn(hObject, eventdata, handles)
% hObject    handle to CPATimeLine_axes (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)


function edit_CaFreeStart_Callback(hObject, eventdata, handles)
% hObject    handle to edit_CaFreeStart (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of edit_CaFreeStart as text
%        str2double(get(hObject,'String')) returns contents of edit_CaFreeStart as a double

UpdateCPAExpLines %Updates the line locations above the graph for CPA experiments


% --- Executes during object creation, after setting all properties.
function edit_CaFreeStart_CreateFcn(hObject, eventdata, handles)
% hObject    handle to edit_CaFreeStart (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function edit_CaFreeEnd_Callback(hObject, eventdata, handles)
% hObject    handle to edit_CaFreeEnd (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of edit_CaFreeEnd as text
%        str2double(get(hObject,'String')) returns contents of edit_CaFreeEnd as a double

UpdateCPAExpLines %Updates the line locations above the graph for CPA experiments


% --- Executes during object creation, after setting all properties.
function edit_CaFreeEnd_CreateFcn(hObject, eventdata, handles)
% hObject    handle to edit_CaFreeEnd (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function edit_CPAStart_Callback(hObject, eventdata, handles)
% hObject    handle to edit_CPAStart (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of edit_CPAStart as text
%        str2double(get(hObject,'String')) returns contents of edit_CPAStart as a double

UpdateCPAExpLines %Updates the line locations above the graph for CPA experiments


% --- Executes during object creation, after setting all properties.
function edit_CPAStart_CreateFcn(hObject, eventdata, handles)
% hObject    handle to edit_CPAStart (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


% --- Executes on button press in pushbutton_resetIP3params.
function pushbutton_resetIP3params_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton_resetIP3params (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

handles.PeakAmp_entry.String = 0.35;
handles.RiseDur_entry.String = 60;
handles.RiseRate_entry.String = 0.001;
handles.DecDur_entry.String = 1500;
handles.IP3input_entry.String = 150;
handles.TotalTime_entry.String = 600;

set(handles.axes_PlotIP3input, 'XLim',...
    [0 str2double(handles.TotalTime_entry.String)]);
set(handles.axes_PlotIP3depCaConc, 'XLim',...
    [0 str2double(handles.TotalTime_entry.String)]);
set(handles.axes_PlotIP3depFluor, 'XLim',...
    [0 str2double(handles.TotalTime_entry.String)]);

UpdateIP3Input


% --- Executes on button press in pushbutton_resetCPAparams.
function pushbutton_resetCPAparams_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton_resetCPAparams (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

handles.edit_CaFreeStart.String = 300;
handles.edit_CPAStart.String = 600;
handles.edit_CaFreeEnd.String = 1500;
handles.CPASimTime_entry.String = 1800;

set(handles.axes_CPACaConc, 'XLim',...
    [0 str2double(handles.CPASimTime_entry.String)]);
set(handles.axes_CPAFluor, 'XLim',...
    [0 str2double(handles.CPASimTime_entry.String)]);

UpdateCPAExpLines


function edit_vip3r_Callback(hObject, eventdata, handles)
% hObject    handle to edit_vip3r (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of edit_vip3r as text
%        str2double(get(hObject,'String')) returns contents of edit_vip3r as a double

if str2double(handles.edit_vip3r.String)>get(handles.vip3r_slider, 'Max')
    handles.edit_vip3r.String = get(handles.vip3r_slider, 'Max');
    msgbox(['Maximum value is ', num2str(get(handles.vip3r_slider, 'Max'))],...
        'Error','error');
elseif str2double(handles.edit_vip3r.String)<get(handles.vip3r_slider, 'Min')
    handles.edit_vip3r.String = get(handles.vip3r_slider, 'Min');
    msgbox(['Minimum value is ', num2str(get(handles.vip3r_slider, 'Min'))],...
        'Error','error');
end
handles.vip3r_slider.Value = str2double(handles.edit_vip3r.String);
% if handles.radiobutton_AutoUpdate.Value==1
%     pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
% end


% --- Executes during object creation, after setting all properties.
function edit_vip3r_CreateFcn(hObject, eventdata, handles)
% hObject    handle to edit_vip3r (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function edit_vserca_Callback(hObject, eventdata, handles)
% hObject    handle to edit_vserca (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of edit_vserca as text
%        str2double(get(hObject,'String')) returns contents of edit_vserca as a double
if str2double(handles.edit_vserca.String)>get(handles.slider_vserca, 'Max')
    handles.edit_vserca.String = get(handles.slider_vserca, 'Max');
    msgbox(['Maximum value is ', num2str(get(handles.slider_vserca, 'Max'))],...
        'Error','error');
elseif str2double(handles.edit_vserca.String)<get(handles.slider_vserca, 'Min')
    handles.edit_vserca.String = get(handles.slider_vserca, 'Min');
    msgbox(['Minimum value is ', num2str(get(handles.slider_vserca, 'Min'))],...
        'Error','error');
end
handles.slider_vserca.Value = str2double(handles.edit_vserca.String);
% if handles.radiobutton_AutoUpdate.Value==1
%     pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
% end


% --- Executes during object creation, after setting all properties.
function edit_vserca_CreateFcn(hObject, eventdata, handles)
% hObject    handle to edit_vserca (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function edit_vin_Callback(hObject, eventdata, handles)
% hObject    handle to edit_vin (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of edit_vin as text
%        str2double(get(hObject,'String')) returns contents of edit_vin as a double
if str2double(handles.edit_vin.String)>get(handles.slider_addEntry, 'Max')
    handles.edit_vin.String = get(handles.slider_addEntry, 'Max');
    msgbox(['Maximum value is ', num2str(get(handles.slider_addEntry, 'Max'))],...
        'Error','error');
elseif str2double(handles.edit_vin.String)<get(handles.slider_addEntry, 'Min')
    handles.edit_vin.String = get(handles.slider_addEntry, 'Min');
    msgbox(['Minimum value is ', num2str(get(handles.slider_addEntry, 'Min'))],...
        'Error','error');
end
handles.slider_addEntry.Value = str2double(handles.edit_vin.String);
% if handles.radiobutton_AutoUpdate.Value==1
%     pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
% end


% --- Executes during object creation, after setting all properties.
function edit_vin_CreateFcn(hObject, eventdata, handles)
% hObject    handle to edit_vin (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function edit_ERleak_Callback(hObject, eventdata, handles)
% hObject    handle to edit_ERleak (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of edit_ERleak as text
%        str2double(get(hObject,'String')) returns contents of edit_ERleak as a double
if str2double(handles.edit_ERleak.String)>get(handles.slider_vERleak, 'Max')
    handles.edit_ERleak.String = get(handles.slider_vERleak, 'Max');
    msgbox(['Maximum value is ', num2str(get(handles.slider_vERleak, 'Max'))],...
        'Error','error');
elseif str2double(handles.edit_ERleak.String)<get(handles.slider_vERleak, 'Min')
    handles.edit_ERleak.String = get(handles.slider_vERleak, 'Min');
    msgbox(['Minimum value is ', num2str(get(handles.slider_vERleak, 'Min'))],...
        'Error','error');
end
handles.slider_vERleak.Value = str2double(handles.edit_ERleak.String);
% if handles.radiobutton_AutoUpdate.Value==1
%     pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
% end


% --- Executes during object creation, after setting all properties.
function edit_ERleak_CreateFcn(hObject, eventdata, handles)
% hObject    handle to edit_ERleak (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function edit_kout_Callback(hObject, eventdata, handles)
% hObject    handle to edit_kout (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of edit_kout as text
%        str2double(get(hObject,'String')) returns contents of edit_kout as a double
if str2double(handles.edit_kout.String)>get(handles.slider_AddExtrusion, 'Max')
    handles.edit_kout.String = get(handles.slider_AddExtrusion, 'Max');
    msgbox(['Maximum value is ', num2str(get(handles.slider_AddExtrusion, 'Max'))],...
        'Error','error');
elseif str2double(handles.edit_kout.String)<get(handles.slider_AddExtrusion, 'Min')
    handles.edit_kout.String = get(handles.slider_AddExtrusion, 'Min');
    msgbox(['Minimum value is ', num2str(get(handles.slider_AddExtrusion, 'Min'))],...
        'Error','error');
end
handles.slider_AddExtrusion.Value = str2double(handles.edit_kout.String);
% if handles.radiobutton_AutoUpdate.Value==1
%     pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
% end


% --- Executes during object creation, after setting all properties.
function edit_kout_CreateFcn(hObject, eventdata, handles)
% hObject    handle to edit_kout (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


% --- Executes on slider movement.
function slider_vserca_Callback(hObject, eventdata, handles)
% hObject    handle to slider_vserca (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'Value') returns position of slider
%        get(hObject,'Min') and get(hObject,'Max') to determine range of slider
handles.edit_vserca.String = handles.slider_vserca.Value;
% if handles.radiobutton_AutoUpdate.Value==1
%     set(hObject, 'enable', 'inactive')
%     handles.edit_vserca.String = handles.slider_vserca.Value;
%     
%     if getappdata(0,'NofIP3Traces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many IP3-dep. Traces');
%     else
%         pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     end
%     
%     if getappdata(0,'NofCPATraces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many CPA-dep. Traces');
%     else
%         UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
%     end
%     
%     pause(4)
%     set(hObject, 'enable', 'on')
% end


% --- Executes during object creation, after setting all properties.
function slider_vserca_CreateFcn(hObject, eventdata, handles)
% hObject    handle to slider_vserca (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: slider controls usually have a light gray background.
if isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor',[.9 .9 .9]);
end


% --- Executes on slider movement.
function vip3r_slider_Callback(hObject, eventdata, handles)
% hObject    handle to vip3r_slider (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'Value') returns position of slider
%        get(hObject,'Min') and get(hObject,'Max') to determine range of slider
handles.edit_vip3r.String = handles.vip3r_slider.Value;
% if handles.radiobutton_AutoUpdate.Value==1
%     set(hObject, 'enable', 'inactive')
%     handles.edit_vip3r.String = handles.vip3r_slider.Value;
%     
%     if getappdata(0,'NofIP3Traces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many IP3-dep. Traces');
%     else
%         pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     end
%     
%     if getappdata(0,'NofCPATraces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many CPA-dep. Traces');
%     else
%         UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
%     end
%     
%     pause(4)
%     set(hObject, 'enable', 'on') %Possibly add it to the callbacks above & remove pause 
% end



% --- Executes during object creation, after setting all properties.
function vip3r_slider_CreateFcn(hObject, eventdata, handles)
% hObject    handle to vip3r_slider (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: slider controls usually have a light gray background.
if isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor',[.9 .9 .9]);
end


% --- Executes on slider movement.
function slider_vERleak_Callback(hObject, eventdata, handles)
% hObject    handle to slider_vERleak (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'Value') returns position of slider
%        get(hObject,'Min') and get(hObject,'Max') to determine range of slider
handles.edit_ERleak.String = handles.slider_vERleak.Value;
% if handles.radiobutton_AutoUpdate.Value==1
%     set(hObject, 'enable', 'inactive')
%     handles.edit_ERleak.String = handles.slider_vERleak.Value;
%     
%     if getappdata(0,'NofIP3Traces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many IP3-dep. Traces');
%     else
%         pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     end
%     
%     if getappdata(0,'NofCPATraces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many CPA-dep. Traces');
%     else
%         UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
%     end
%     
%     pause(4)
%     set(hObject, 'enable', 'on')
% end


% --- Executes during object creation, after setting all properties.
function slider_vERleak_CreateFcn(hObject, eventdata, handles)
% hObject    handle to slider_vERleak (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: slider controls usually have a light gray background.
if isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor',[.9 .9 .9]);
end


% --- Executes on slider movement.
function slider_addEntry_Callback(hObject, eventdata, handles)
% hObject    handle to slider_addEntry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'Value') returns position of slider
%        get(hObject,'Min') and get(hObject,'Max') to determine range of slider
handles.edit_vin.String = handles.slider_addEntry.Value;
% if handles.radiobutton_AutoUpdate.Value==1
%     set(hObject, 'enable', 'inactive')
%     handles.edit_vin.String = handles.slider_addEntry.Value;
%     
%     if getappdata(0,'NofIP3Traces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many IP3-dep. Traces');
%     else
%         pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     end
%     
%     if getappdata(0,'NofCPATraces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many CPA-dep. Traces');
%     else
%         UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
%     end
%     
%     pause(4)
%     set(hObject, 'enable', 'on')
% end


% --- Executes during object creation, after setting all properties.
function slider_addEntry_CreateFcn(hObject, eventdata, handles)
% hObject    handle to slider_addEntry (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: slider controls usually have a light gray background.
if isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor',[.9 .9 .9]);
end


% --- Executes on slider movement.
function slider_AddExtrusion_Callback(hObject, eventdata, handles)
% hObject    handle to slider_AddExtrusion (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'Value') returns position of slider
%        get(hObject,'Min') and get(hObject,'Max') to determine range of slider
handles.edit_kout.String = handles.slider_AddExtrusion.Value;
% if handles.radiobutton_AutoUpdate.Value==1
%     set(hObject, 'enable', 'inactive')
%     handles.edit_kout.String = handles.slider_AddExtrusion.Value;
%     
%     if getappdata(0,'NofIP3Traces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many IP3-dep. Traces');
%     else
%         pushbutton_UpdateIP3EvokedTraces_Callback(hObject, eventdata, handles)
%     end
%     
%     if getappdata(0,'NofCPATraces')>=5 %cannot plot more than 5 traces
%         errordlg(['Cannot plot more than 5 superimposed traces. Please',...
%             ' remove previous traces and start over.'], 'ERROR: Too Many CPA-dep. Traces');
%     else
%         UpdateCPA_pushbutton_Callback(hObject, eventdata, handles)
%     end
%     
%     pause(4)
%     set(hObject, 'enable', 'on')
% end


% --- Executes during object creation, after setting all properties.
function slider_AddExtrusion_CreateFcn(hObject, eventdata, handles)
% hObject    handle to slider_AddExtrusion (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: slider controls usually have a light gray background.
if isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor',[.9 .9 .9]);
end


% --- Executes on button press in checkbox_superimp.
function checkbox_superimp_Callback(hObject, eventdata, handles)
% hObject    handle to checkbox_superimp (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

%When checked, automatically: handles.checkbox_superimp.Value=1;
if handles.checkbox_superimp.Value==1
    axes(handles.axes_CPACaConc); hold on
    axes(handles.axes_CPAFluor); hold on
    axes(handles.axes_PlotIP3depCaConc); hold on
    axes(handles.axes_PlotIP3depFluor); hold on
    handles.pushbutton_removeTraces.Visible = 'on';
elseif getappdata(0,'NofIP3Traces')>0 %checkbox is off & something was plotted before
    proceed=questdlg('Previous traces will be removed. Would you like to proceed?',...
        'WARNING', 'Remove Traces', 'Cancel', 'Cancel');
    if strcmp(proceed, 'Remove Traces')
        axes(handles.axes_CPACaConc); cla; hold off
        axes(handles.axes_CPAFluor); cla; hold off
        axes(handles.axes_PlotIP3depCaConc); cla; hold off
        axes(handles.axes_PlotIP3depFluor); cla; hold off
        set(handles.axes_CPACaConc, 'box', 'off')
        set(handles.axes_CPAFluor, 'box', 'off')
        set(handles.axes_PlotIP3depCaConc, 'box', 'off')
        set(handles.axes_PlotIP3depFluor, 'box', 'off')
        
        %Reset upper limits for plotting:
        setappdata(0,'SavedUpperLimCPA',1.5)
        setappdata(0,'SavedUpperLimIP3',1.5)
        setappdata(0, 'AllIP3PlotParams',[])
        setappdata(0, 'IP3Traces', [])
        setappdata(0,'NofIP3Traces', 0)
        setappdata(0, 'CPATraces', [])
        setappdata(0,'NofCPATraces', 0)
        
        handles.listbox_IP3.Visible='off';
        handles.pushbutton_Qip3.Visible='off';
        handles.text_legendIP3.Visible='off';
        handles.listbox_IP3.String = [];
        handles.listbox_CPA.Visible='off';
        handles.pushbutton_Qcpa.Visible='off';
        handles.text_legendCPA.Visible='off';
        handles.listbox_CPA.String = [];
        handles.pushbutton_removeTraces.Visible = 'off';
        
    else
        handles.checkbox_superimp.Value=1;
    end
else %Nothing was plotted, but user removed the box tick
    handles.pushbutton_removeTraces.Visible = 'off';
end


% --- Executes on selection change in listbox_IP3.
function listbox_IP3_Callback(hObject, eventdata, handles)
% hObject    handle to listbox_IP3 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: contents = cellstr(get(hObject,'String')) returns listbox_IP3 contents as cell array
%        contents{get(hObject,'Value')} returns selected item from listbox_IP3
if strcmp(get(gcf,'selectiontype'),'open')
    %Code to be executed afer double-click
    IP3ParamList = getappdata(0, 'AllIP3PlotParams');
    ToDisp = IP3ParamList(handles.listbox_IP3.Value, :);

    ParamNames = {'vPMCA    = '; 'vSOC      = '; 'vin           = '; 'kout         = ';...
        'vSERCA  = '; 'vIP3R      = '; 'vERleak   = ';...
        'IP3 start   = '; 'IP3 peak   = '; 'IP3 r_rise  = '; 'IP3 d_rise = ';...
        'IP3 d_dec = '};
    
    ToDisp2=round(ToDisp*1e5)/1e5;
    m = msgbox(['    '; strcat(ParamNames, num2str(ToDisp2')); '    '],...
        ['IP3 Param. set ', num2str(handles.listbox_IP3.Value)]);
    set(m, 'units', 'inches')
    P = get(m, 'Position');
    set(m, 'position', [P(1)*1.05 P(2)*1.05 2.4 3.7], 'Resize', 'on');%[500 300 160 230]); %makes box bigger
    ah = get(m, 'CurrentAxes');
    ch = get(ah, 'Children');
    set(ch, 'FontUnits', 'normalized','FontSize', 0.048);%13); %makes text bigger

end


% --- Executes during object creation, after setting all properties.
function listbox_IP3_CreateFcn(hObject, eventdata, handles)
% hObject    handle to listbox_IP3 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: listbox controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function hexStr = rgb2Hex(rgbColour)
hexStr = reshape(dec2hex(rgbColour, 2)',1, 6);


% --- Executes on button press in pushbutton_Qip3.
function pushbutton_Qip3_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton_Qip3 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
msgbox(['Each Parameter Set under ''Legend'' corresponds to the trace of the',...
    ' same color. By clicking on each Parameter Set, you can view '...
    'the parameters used to generate that trace.'],...
    'Legend Information')

% --- Executes on button press in pushbutton_removeTraces.
function pushbutton_removeTraces_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton_removeTraces (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

axes(handles.axes_CPACaConc); cla; hold off
axes(handles.axes_CPAFluor); cla; hold off
axes(handles.axes_PlotIP3depCaConc); cla; hold off
axes(handles.axes_PlotIP3depFluor); cla; hold off
set(handles.axes_CPACaConc, 'box', 'off')
set(handles.axes_CPAFluor, 'box', 'off')
set(handles.axes_PlotIP3depCaConc, 'box', 'off')
set(handles.axes_PlotIP3depFluor, 'box', 'off')

%Reset upper limits for plotting:
setappdata(0,'SavedUpperLimCPA',1.5)
setappdata(0,'SavedUpperLimIP3',1.5)
setappdata(0, 'AllIP3PlotParams',[])
setappdata(0, 'IP3Traces', [])
setappdata(0,'NofIP3Traces', 0)
setappdata(0, 'AllCPAPlotParams',[])
setappdata(0, 'CPATraces', [])
setappdata(0,'NofCPATraces', 0)

handles.listbox_IP3.Visible='off';
handles.pushbutton_Qip3.Visible='off';
handles.text_legendIP3.Visible='off';
handles.listbox_IP3.String = [];
handles.listbox_CPA.Visible='off';
handles.pushbutton_Qcpa.Visible='off';
handles.text_legendCPA.Visible='off';
handles.listbox_CPA.String = [];
% handles.pushbutton_removeTraces.Visible = 'off';


% --- Executes on button press in pushbutton11.
function pushbutton11_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton11 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)


% --- Executes on button press in pushbutton_Qcpa.
function pushbutton_Qcpa_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton_Qcpa (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
msgbox(['Each Parameter Set under ''Legend'' corresponds to the trace of the',...
    ' same color. By clicking on each Parameter Set, you can view '...
    'the parameters used to generate that trace.'],...
    'Legend Information')


% --- Executes on selection change in listbox_CPA.
function listbox_CPA_Callback(hObject, eventdata, handles)
% hObject    handle to listbox_CPA (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: contents = cellstr(get(hObject,'String')) returns listbox_CPA contents as cell array
%        contents{get(hObject,'Value')} returns selected item from listbox_CPA

if strcmp(get(gcf,'selectiontype'),'open')
    % here you write write code, which you wanna be executed afer double-click
    CPAParamList = getappdata(0, 'AllCPAPlotParams');
    ToDisp = CPAParamList(handles.listbox_CPA.Value, :);
    
    ParamNames = {'vPMCA    = '; 'vSOC      = '; 'vin           = '; 'kout         = ';...
        'vSERCA  = '; 'vIP3R      = '; 'vERleak   = ';...
        'Ca-Free start   = '; 'CPA start   = '; 'Ca-Free end  = '};

    ToDisp2=round(ToDisp*1e5)/1e5;
    m = msgbox(['    '; strcat(ParamNames, num2str(ToDisp2')); '    '],...
        ['CPA Param. set ', num2str(handles.listbox_CPA.Value)]);
    set(m, 'units', 'inches')
    P = get(m, 'Position');
    set(m, 'units', 'inches', 'position', [P(1) P(2) 2.4 3.2], 'Resize', 'on'); %makes box bigger
    ah = get(m, 'CurrentAxes');
    ch = get(ah, 'Children');
    set(ch, 'FontUnits', 'normalized','FontSize', 0.055);%13); %makes text bigger
end

% --- Executes during object creation, after setting all properties.
function listbox_CPA_CreateFcn(hObject, eventdata, handles)
% hObject    handle to listbox_CPA (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: listbox controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function callbkListvPMCA(SliderH, EventData, Event, handles)
%disp(Event)
handles.vPMCA_entry.String = handles.vPMCA_slider.Value;

function callbkListvSOC(SliderH, EventData, Event, handles)
handles.vSOC_entry.String = handles.vSOC_slider.Value;

function callbkListaddEntry(SliderH, EventData, Event, handles)
handles.edit_vin.String = handles.slider_addEntry.Value;

function callbkListaddExtr(SliderH, EventData, Event, handles)
handles.edit_kout.String = handles.slider_AddExtrusion.Value;

function callbkListvSERCA(SliderH, EventData, Event, handles)
handles.edit_vserca.String = handles.slider_vserca.Value;

function callbkListvERleak(SliderH, EventData, Event, handles)
handles.edit_ERleak.String = handles.slider_vERleak.Value;

function callbkListvip3r(SliderH, EventData, Event, handles)
handles.edit_vip3r.String = handles.vip3r_slider.Value;


% --- Creates and returns a handle to the GUI figure. 
function h1 = AstroCalMod_LayoutFcn(policy)
% policy - create a new figure or use a singleton. 'new' or 'reuse'.

persistent hsingleton;
if strcmpi(policy, 'reuse') & ishandle(hsingleton)
    h1 = hsingleton;
    return;
end
addpath(genpath('Supporting functions'));
load AstroCalMod.mat


appdata = [];
appdata.GUIDEOptions = mat{1};
appdata.lastValidTag = 'figure1';
appdata.GUIDELayoutEditor = [];
appdata.initTags = struct(...
    'handle', [], ...
    'tag', 'figure1');


h1 = figure(...
'Units','inches',...'normalized',...
'Position',[2.5 2.5 12 7.3],...[2.5 2.5 14 8],...[0.3 0.3 0.83 0.8],...%[0.3 0.3 0.87 0.84],...
'Visible',get(0,'defaultfigureVisible'),...
'Color',get(0,'defaultfigureColor'),...
'CurrentAxesMode','manual',...
'IntegerHandle','off',...
'MenuBar','none',...
'Name','Astrocyte_Ca_Model_GUI_test',...
'NumberTitle','off',...
'Resize',get(0,'defaultfigureResize'),...
'PaperPosition',get(0,'defaultfigurePaperPosition'),...
'ScreenPixelsPerInchMode','manual',...
'ChildrenMode','manual',...
'ParentMode','manual',...
'HandleVisibility','callback',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('figure1_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'Tag','figure1');
 
h1.Name = 'AstroCalMod 1.0';

      
appdata = [];
appdata.lastValidTag = 'IntrinsicParams_panel';

h2 = uipanel(...
'Parent',h1,...
'FontUnits',get(0,'defaultuipanelFontUnits'),...
'Units',get(0,'defaultuipanelUnits'),...
'Title',blanks(0),...
'Position',[0.668938656280428 0.208398133748056 0.323271665043817 0.766718506998445],...
'ParentMode','manual',...
'Tag','IntrinsicParams_panel',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} );

appdata = [];
appdata.lastValidTag = 'vSOC_slider';

h3 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'FontSize',0.001,...
'Max',20,...
'String','',...
'Style','slider',...
'BusyAction', 'cancel',...
'Interruptible', 'off',...
'Value',0.785,...
'Position',[0.38109756097561 0.427  0.35 0.023],...%[0.38109756097561 0.44  0.35 0.02],...%[0.38109756097561 0.425  0.35 0.034],...
'BackgroundColor',[0.67843137254902 0.92156862745098 1],...
'Callback',@(hObject,eventdata)AstroCalMod('vSOC_slider_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'Visible',get(0,'defaultuicontrolVisible'),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('vSOC_slider_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'Tag','vSOC_slider');

h3.addlistener('ContinuousValueChange', @(src, evt) callbkListvSOC(src, evt, 'moved', guidata(h3)));


appdata = [];
appdata.lastValidTag = 'text3';

h4 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...%get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Max SOC flux',...
'Style','text',...
'Position',[0.13109756097561 0.415132924335378 0.24390243902439 0.0429447852760736],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text3',...
'FontSize',0.57);

appdata = [];
appdata.lastValidTag = 'vSOC_entry';

h5 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...%get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'FontSize',0.56,...
'Max',get(0,'defaultuicontrolMax'),...
'String','0.785',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.74390243902439 0.423312883435583 0.167682926829268 0.0347648261758692],...
'Callback',@(hObject,eventdata)AstroCalMod('vSOC_entry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('vSOC_entry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','vSOC_entry');


appdata = [];
appdata.lastValidTag = 'text6';

h6 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...%get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Astrocyte Calcium Flux Parameters',...
'Style','text',...
'Position',[0.087378640776699 0.92 0.831715210355987 0.0495689655172413],...%[0.087378640776699 0.938804700788619 0.831715210355987 0.0495689655172413],...
'Children',[],...
'ForegroundColor',[0 0.447058823529412 0.741176470588235],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text6',...
'FontSize',0.63,...
'FontWeight','bold');

appdata = [];
appdata.lastValidTag = 'vPMCA_slider';

h7 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...%get(0,'defaultuicontrolFontUnits'),...
'FontSize',0.001,...
'Units','normalized',...
'Max',300,...
'String',blanks(0),...
'Style','slider',...
'BusyAction', 'cancel',...
'Interruptible', 'off',...
'Value',10,...
'Position',[0.38109756097561 0.49  0.35 0.023],...%[0.38109756097561 0.482 0.35 0.034],...%[0.38109756097561 0.485 0.35 0.034],...
'BackgroundColor',[0.67843137254902 0.92156862745098 1],...
'Callback',@(hObject,eventdata)AstroCalMod('vPMCA_slider_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('vPMCA_slider_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','vPMCA_slider');

h7.addlistener('ContinuousValueChange', @(src, evt) callbkListvPMCA(src, evt, 'moved', guidata(h7)));


appdata = [];
appdata.lastValidTag = 'text11';

h8 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...%get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Max PMCA flux',...
'Style','text',...
'Position',[0.109756097560976 0.47 0.265243902439024 0.0429447852760736],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text11',...
'FontSize',0.57);

appdata = [];
appdata.lastValidTag = 'vPMCA_entry';

h9 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...%get(0,'defaultuicontrolFontUnits'),...
'FontSize',0.56,...
'Units','normalized',...
'Max',get(0,'defaultuicontrolMax'),...'Max',500,...
'String','10',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.74390243902439 0.484662576687117 0.167682926829268 0.0347648261758691],...
'Callback',@(hObject,eventdata)AstroCalMod('vPMCA_entry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('vPMCA_entry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','vPMCA_entry');


appdata = [];
appdata.lastValidTag = 'radiobutton_ManualUpdate';

%Radiobutton is invisible now. May make it visible in future version to add
%"radiobutton_AutoUpdate" above.
h11 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...%get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Update Each Trace',...
'Style','radiobutton',...
'Value',1,...
'Position',[0.041 0.84 0.776699029126214 0.0665280665280665],...%[0.0401472097245244 0.87505580143617 0.776699029126214 0.0665280665280665],...
'Callback',@(hObject,eventdata)AstroCalMod('radiobutton_ManualUpdate_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','radiobutton_ManualUpdate',...
'FontSize',0.37,...
'visible', 'off');

appdata = [];
appdata.lastValidTag = 'pushbutton_ResetIntrParams';

appdata = [];
appdata.lastValidTag = 'radiobutton_AutoUpdate';

%Display text instead of radiobutton_ManualUpdate above
h_ReplaceRadio = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...%get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Update Each Trace After Setting Parameters',...
'Style','text',...
'Position',[0.12 0.81 0.776699029126214 0.0665280665280665],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata},...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text_ReplaceRadio',...
'FontSize',0.38);


h12 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...%get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','RESET TO DEFAULT',...
'Style',get(0,'defaultuicontrolStyle'),...
'Position',[0.0194174757281553 0.6028794800656 0.36 0.048],...%[0.0194174757281553 0.6028794800656 0.436893203883495 0.0540540540540541],...
'BackgroundColor',[0.67843137254902 0.92156862745098 1],...
'Callback',@(hObject,eventdata)AstroCalMod('pushbutton_ResetIntrParams_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',[0 0.447058823529412 0.741176470588235],...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'Tag','pushbutton_ResetIntrParams',...
'FontSize',0.48,...
'FontWeight',get(0,'defaultuicontrolFontWeight'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} );

appdata = [];
appdata.lastValidTag = 'text38';

h13 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','IP3R flux rate',...
'Style','text',...
'Position',[0.134146341463415 0.104294478527607 0.23780487804878 0.0408997955010225],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text38',...
'FontSize',0.59);

appdata = [];
appdata.lastValidTag = 'edit_vip3r';

h14 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'FontSize',0.56,...
'Units','normalized',...
'Max',get(0,'defaultuicontrolMax'),... %10,...
'String','0.222',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.74390243902439 0.10838445807771 0.167682926829268 0.0347648261758691],...
'Callback',@(hObject,eventdata)AstroCalMod('edit_vip3r_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('edit_vip3r_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','edit_vip3r');

appdata = [];
appdata.lastValidTag = 'text39';

h15 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Max SERCA flux',...
'Style','text',...
'Position',[0.0853658536585366 0.16 0.286585365853659 0.0408997955010225],...%[0.0853658536585366 0.165644171779141 0.286585365853659 0.0408997955010225],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text39',...
'FontSize',0.59);

appdata = [];
appdata.lastValidTag = 'edit_vserca';

h16 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'FontSize',0.56,...
'Units','normalized',...
'Max',get(0,'defaultuicontrolMax'),...%500,...
'String','0.9',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.74390243902439 0.167689161554192 0.167682926829268 0.0347648261758691],...
'Callback',@(hObject,eventdata)AstroCalMod('edit_vserca_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('edit_vserca_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','edit_vserca');

appdata = [];
appdata.lastValidTag = 'text40';

h17 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Additional Entry',...
'Style','text',...
'Position',[0.100609756097561 0.35 0.274390243902439 0.0408997955010225],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text40',...
'FontSize',0.59);

appdata = [];
appdata.lastValidTag = 'edit_vin';

h18 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'FontSize',0.56,...
'Units','normalized',...
'Max',get(0,'defaultuicontrolMax'),...'Max',20,...
'String','0.05',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.74390243902439 0.361963190184049 0.167682926829268 0.0347648261758691],...
'Callback',@(hObject,eventdata)AstroCalMod('edit_vin_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('edit_vin_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','edit_vin');

appdata = [];
appdata.lastValidTag = 'text41';

h19 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','ER leak rate',...
'Style','text',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.143292682926829 0.0470347648261759 0.228658536585366 0.0408997955010225],...
'BackgroundColor',get(0,'defaultuicontrolBackgroundColor'),...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text41',...
'UserData',[],...
'FontSize',0.59,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'edit_ERleak';

h20 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'FontSize',0.56,...
'Units','normalized',...
'Max',get(0,'defaultuicontrolMax'),...%500,...
'String','0.00133',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.74390243902439 0.0531697341513293 0.167682926829268 0.0347648261758691],...
'Callback',@(hObject,eventdata)AstroCalMod('edit_ERleak_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('edit_ERleak_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','edit_ERleak');

appdata = [];
appdata.lastValidTag = 'text43';

h21 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Additional Extrusion',...
'Style','text',...
'Position',[0.0304878048780488 0.29 0.347560975609756 0.0408997955010225],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text43',...
'FontSize',0.59);

appdata = [];
appdata.lastValidTag = 'edit_kout';

h22 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'FontSize',0.56,...
'Units','normalized',...
'Max',get(0,'defaultuicontrolMax'),...'Max',500,...
'String','1.2',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.74390243902439 0.302658486707567 0.167682926829268 0.0347648261758691],...
'Callback',@(hObject,eventdata)AstroCalMod('edit_kout_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('edit_kout_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','edit_kout');

appdata = [];
appdata.lastValidTag = 'slider_vserca';

h23 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',10,...
'Min',get(0,'defaultuicontrolMin'),...
'BusyAction', 'cancel',...
'Interruptible', 'off',...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String',blanks(0),...
'Style','slider',...
'Value',10,...
'Position',[0.38109756097561 0.173  0.35 0.023],...%[0.38109756097561 0.168 0.35 0.034],...
'BackgroundColor',[0.67843137254902 0.92156862745098 1],...
'Callback',@(hObject,eventdata)AstroCalMod('slider_vserca_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('slider_vserca_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','slider_vserca',...
'UserData',[],...
'FontSize',0.001,...get(0,'defaultuicontrolFontSize'),...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));
%'Position',[0.38109756097561 0.155419222903885 0.353658536585366 0.0470347648261759],...

h23.addlistener('ContinuousValueChange', @(src, evt) callbkListvSERCA(src, evt, 'moved', guidata(h23)));


appdata = [];
appdata.lastValidTag = 'vip3r_slider';

h24 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',5,...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String',blanks(0),...
'Style','slider',...
'Value',get(0,'defaultuicontrolValue'),...
'BusyAction', 'cancel',...
'Interruptible', 'off',...
'Position',[0.38109756097561 0.114  0.35 0.023],...%[0.378048780487805 0.108 0.35 0.034],...
'BackgroundColor',[0.67843137254902 0.92156862745098 1],...
'Callback',@(hObject,eventdata)AstroCalMod('vip3r_slider_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('vip3r_slider_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','vip3r_slider',...
'UserData',[],...
'FontSize',0.001,...get(0,'defaultuicontrolFontSize'),...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

h24.addlistener('ContinuousValueChange', @(src, evt) callbkListvip3r(src, evt, 'moved', guidata(h24)));


appdata = [];
appdata.lastValidTag = 'slider_addEntry';

h25 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String',blanks(0),...
'Style','slider',...
'Value',get(0,'defaultuicontrolValue'),...
'BusyAction', 'cancel',...
'Interruptible', 'off',...
'Position',[0.38109756097561 0.368  0.35 0.023],...%[0.38109756097561 0.36 0.35 0.034],...%[0.38109756097561 0.363 0.35 0.034],...
'BackgroundColor',[0.67843137254902 0.92156862745098 1],...
'Callback',@(hObject,eventdata)AstroCalMod('slider_addEntry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('slider_addEntry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','slider_addEntry',...
'UserData',[],...
'FontSize',0.001,...get(0,'defaultuicontrolFontSize'),...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

h25.addlistener('ContinuousValueChange', @(src, evt) callbkListaddEntry(src, evt, 'moved', guidata(h25)));


appdata = [];
appdata.lastValidTag = 'slider_AddExtrusion';

h26 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',10,...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String',blanks(0),...
'Style','slider',...
'Value',10,...
'BusyAction', 'cancel',...
'Interruptible', 'off',...
'Position',[0.38109756097561 0.307  0.35 0.023],...%[0.38109756097561 0.301 0.35 0.034],...
'BackgroundColor',[0.67843137254902 0.92156862745098 1],...
'Callback',@(hObject,eventdata)AstroCalMod('slider_AddExtrusion_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('slider_AddExtrusion_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','slider_AddExtrusion',...
'UserData',[],...
'FontSize',0.001,...get(0,'defaultuicontrolFontSize'),...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

h26.addlistener('ContinuousValueChange', @(src, evt) callbkListaddExtr(src, evt, 'moved', guidata(h26)));


appdata = [];
appdata.lastValidTag = 'slider_vERleak';

h27 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',0.01,...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String',blanks(0),...
'Style','slider',...
'BusyAction', 'cancel',...
'Interruptible', 'off',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.38109756097561 0.0575  0.35 0.023],...%[0.375 0.051 0.35 0.034],...
'BackgroundColor',[0.67843137254902 0.92156862745098 1],...
'Callback',@(hObject,eventdata)AstroCalMod('slider_vERleak_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('slider_vERleak_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','slider_vERleak',...
'UserData',[],...
'FontSize',0.001,...get(0,'defaultuicontrolFontSize'),...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

h27.addlistener('ContinuousValueChange', @(src, evt) callbkListvERleak(src, evt, 'moved', guidata(h27)));


appdata = [];
appdata.lastValidTag = 'text47';

h28 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment','left',...
'String','__________',...
'Style','text',...
'Position',[0.0224662562159602 0.216386231451732 0.190938511326861 0.0332640332640333],...
'Children',[],...
'ForegroundColor',[0 0.447058823529412 0.741176470588235],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text47',...
'FontSize',0.7);

appdata = [];
appdata.lastValidTag = 'text48';

h29 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment','left',...
'String','ER Fluxes',...
'Style','text',...
'Position',[0.0257025021706528 0.226781241846742 0.190938511326861 0.0332640332640333],...
'Children',[],...
'ForegroundColor',[0 0.447058823529412 0.741176470588235],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text48',...
'FontSize',0.75);

appdata = [];
appdata.lastValidTag = 'text49';

h30 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment','left',...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','_______________________',...
'Style','text',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.0241085471489941 0.532913538848455 0.467103101011761 0.0326690292014379],...
'BackgroundColor',get(0,'defaultuicontrolBackgroundColor'),...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',[0 0.447058823529412 0.741176470588235],...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text49',...
'UserData',[],...
'FontSize',0.7,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'text50';

h31 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment','left',...
'String','Plasma Membrane Fluxes',...
'Style','text',...
'Position',[0.0226537216828479 0.546799333430253 0.44336569579288 0.0311850311850312],...
'Children',[],...
'ForegroundColor',[0 0.447058823529412 0.741176470588235],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text50',...
'FontSize',0.764);

appdata = [];
appdata.lastValidTag = 'text53';

h32 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','uM/s',...
'Style','text',...
'Position',[0.914634146341463 0.480572597137015 0.0884146341463415 0.0368098159509203],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text53',...
'FontSize',0.55);

appdata = [];
appdata.lastValidTag = 'text54';

h33 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','uM/s',...
'Style','text',...
'Position',[0.914634146341463 0.421267893660532 0.0884146341463415 0.0368098159509203],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text54',...
'FontSize',0.55);

appdata = [];
appdata.lastValidTag = 'text55';

h34 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','uM/s',...
'Style','text',...
'Position',[0.911585365853659 0.359918200408998 0.0884146341463414 0.0368098159509203],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text55',...
'FontSize',0.55);

appdata = [];
appdata.lastValidTag = 'textsm11';

h35 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','1/s',...
'Style','text',...
'Position',[0.911585365853659 0.298568507157464 0.0701219512195121 0.0368098159509203],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','textsm11',...
'FontSize',0.55);

appdata = [];
appdata.lastValidTag = 'textsm13';

h36 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','1/s',...
'Style','text',...
'Position',[0.914634146341463 0.049079754601227 0.0609756097560975 0.0368098159509202],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','textsm13',...
'FontSize',0.55);

appdata = [];
appdata.lastValidTag = 'textsm12';

h37 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','1/s',...
'Style','text',...
'Position',[0.917682926829268 0.106339468302659 0.0609756097560976 0.0368098159509203],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','textsm12',...
'FontSize',0.55);

appdata = [];
appdata.lastValidTag = 'text59';

h38 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','uM/s',...
'Style','text',...
'Position',[0.911585365853659 0.167689161554192 0.0884146341463414 0.0368098159509202],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text59',...
'FontSize',0.55);

appdata = [];
appdata.lastValidTag = 'checkbox_superimp';

h39 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','Superimpose Traces (up to 5)',...
'Style','checkbox',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.25 0.78 0.6 0.047],...%[0.427926711894645 0.747304042982891 0.560523721214113 0.0469617294770669],...
'BackgroundColor',get(0,'defaultuicontrolBackgroundColor'),...
'Callback',@(hObject,eventdata)AstroCalMod('checkbox_superimp_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','checkbox_superimp',...
'UserData',[],...
'FontSize',0.52,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'pushbutton_removeTraces';

h40 = uicontrol(...
'Parent',h2,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Remove Previous Traces',...
'Style',get(0,'defaultuicontrolStyle'),...
'Position',[0.33 0.73 0.454268292682927 0.0429447852760736],...%[0.496775159041292 0.707541058567999 0.454268292682927 0.0429447852760736],...
'BackgroundColor',[1 1 1],...
'Callback',@(hObject,eventdata)AstroCalMod('pushbutton_removeTraces_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Visible','off',...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','pushbutton_removeTraces',...
'FontSize',0.55,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'uipanel3';

h41 = uipanel(...
'Parent',h1,...
'FontUnits',get(0,'defaultuipanelFontUnits'),...
'Units',get(0,'defaultuipanelUnits'),...
'Title',blanks(0),...
'Position',[-0.00102249488752556 -0.00157977883096367 0.331288343558282 1],...
'ParentMode','manual',...
'Tag','uipanel3',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} );

appdata = [];
appdata.lastValidTag = 'axes_PlotIP3depCaConc';

h42 = axes(...
'Parent',h41,...
'FontUnits',get(0,'defaultaxesFontUnits'),...
'Units',get(0,'defaultaxesUnits'),...
'CameraPosition',[0.5 0.5 9.16025403784439],...
'CameraPositionMode',get(0,'defaultaxesCameraPositionMode'),...
'CameraTarget',[0.5 0.5 0.5],...
'CameraTargetMode',get(0,'defaultaxesCameraTargetMode'),...
'CameraViewAngle',6.60861036031192,...
'CameraViewAngleMode',get(0,'defaultaxesCameraViewAngleMode'),...
'Position',[0.19375 0.571518494467957 0.746875 0.186009538950715],...
'ActivePositionProperty','position',...
'ActivePositionPropertyMode',get(0,'defaultaxesActivePositionPropertyMode'),...
'LooseInset',[0.264366772582842 0.2792384406165 0.193191103041307 0.190389845874886],...
'LooseInsetMode',get(0,'defaultaxesLooseInsetMode'),...
'PlotBoxAspectRatio',[1 0.468503937007874 0.468503937007874],...
'PlotBoxAspectRatioMode',get(0,'defaultaxesPlotBoxAspectRatioMode'),...
'FontSize',12,...
'XTick',[],...
'YTick',[],...
'SortMethod','childorder',...
'SortMethodMode',get(0,'defaultaxesSortMethodMode'),...
'CameraMode',get(0,'defaultaxesCameraMode'),...
'DataSpaceMode',get(0,'defaultaxesDataSpaceMode'),...
'ColorSpaceMode',get(0,'defaultaxesColorSpaceMode'),...
'DecorationContainerMode',get(0,'defaultaxesDecorationContainerMode'),...
'ChildContainerMode',get(0,'defaultaxesChildContainerMode'),...
'ZGridHandleMode',get(0,'defaultaxesZGridHandleMode'),...
'XAxisMode',get(0,'defaultaxesXAxisMode'),...
'XBaselineMode',get(0,'defaultaxesXBaselineMode'),...
'YAxisMode',get(0,'defaultaxesYAxisMode'),...
'YBaselineMode',get(0,'defaultaxesYBaselineMode'),...
'ZAxisMode',get(0,'defaultaxesZAxisMode'),...
'ZBaselineMode',get(0,'defaultaxesZBaselineMode'),...
'AmbientLightSourceMode',get(0,'defaultaxesAmbientLightSourceMode'),...
'ZGrid','on',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'Tag','axes_PlotIP3depCaConc',...
'ParentMode','manual');


h43 = get(h42,'title');

set(h43,...
'Parent',h42,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0 0 0],...
'ColorMode','auto',...
'Position',[0.500000726519607 1.01386554621849 0.499999999999998],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','bold',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','Axes Title',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h44 = get(h42,'xlabel');

set(h44,...
'Parent',h42,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[0.500000476837158 -0.0369747899159667 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','top',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h45 = get(h42,'ylabel');

set(h45,...
'Parent',h42,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[-0.0173228346456693 0.500000476837158 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',90,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h46 = get(h42,'zlabel');

set(h46,...
'Parent',h42,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[0 0 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',10,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','left',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','middle',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','off',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

appdata = [];
appdata.lastValidTag = 'axes_PlotIP3depFluor';

h47 = axes(...
'Parent',h41,...
'FontUnits',get(0,'defaultaxesFontUnits'),...
'Units',get(0,'defaultaxesUnits'),...
'CameraPosition',[0.5 0.5 9.16025403784439],...
'CameraPositionMode',get(0,'defaultaxesCameraPositionMode'),...
'CameraTarget',[0.5 0.5 0.5],...
'CameraTargetMode',get(0,'defaultaxesCameraTargetMode'),...
'CameraViewAngle',6.60861036031192,...
'CameraViewAngleMode',get(0,'defaultaxesCameraViewAngleMode'),...
'Position',[0.196875 0.353712453132503 0.746875 0.186009538950715],...
'ActivePositionProperty','position',...
'ActivePositionPropertyMode',get(0,'defaultaxesActivePositionPropertyMode'),...
'LooseInset',[0.264366772582842 0.2792384406165 0.193191103041307 0.190389845874887],...
'LooseInsetMode',get(0,'defaultaxesLooseInsetMode'),...
'PlotBoxAspectRatio',[1 0.468503937007874 0.468503937007874],...
'PlotBoxAspectRatioMode',get(0,'defaultaxesPlotBoxAspectRatioMode'),...
'FontSize',12,...
'XTick',[0 0.2 0.4 0.6 0.8 1],...
'XTickMode',get(0,'defaultaxesXTickMode'),...
'XTickLabel',{  '0'; '0.2'; '0.4'; '0.6'; '0.8'; '1' },...
'XTickLabelMode',get(0,'defaultaxesXTickLabelMode'),...
'XMinorTick',get(0,'defaultaxesXMinorTick'),...
'YTick',[],...
'YTickLabel',blanks(0),...
'YTickLabelsMode','manual',...
'SortMethod','childorder',...
'SortMethodMode',get(0,'defaultaxesSortMethodMode'),...
'CameraMode',get(0,'defaultaxesCameraMode'),...
'DataSpaceMode',get(0,'defaultaxesDataSpaceMode'),...
'ColorSpaceMode',get(0,'defaultaxesColorSpaceMode'),...
'DecorationContainerMode',get(0,'defaultaxesDecorationContainerMode'),...
'ChildContainerMode',get(0,'defaultaxesChildContainerMode'),...
'ZGridHandleMode',get(0,'defaultaxesZGridHandleMode'),...
'XAxisMode',get(0,'defaultaxesXAxisMode'),...
'XBaselineMode',get(0,'defaultaxesXBaselineMode'),...
'YAxisMode',get(0,'defaultaxesYAxisMode'),...
'YBaselineMode',get(0,'defaultaxesYBaselineMode'),...
'ZAxisMode',get(0,'defaultaxesZAxisMode'),...
'ZBaselineMode',get(0,'defaultaxesZBaselineMode'),...
'AmbientLightSourceMode',get(0,'defaultaxesAmbientLightSourceMode'),...
'XMinorGrid',get(0,'defaultaxesXMinorGrid'),...
'ZGrid','on',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','axes_PlotIP3depFluor',...
'ParentMode','manual');

h48 = get(h47,'title');

set(h48,...
'Parent',h47,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0 0 0],...
'ColorMode','auto',...
'Position',[0.50000073027423 1.01386554621849 0.499999999999998],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','bold',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','Axes Title',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h49 = get(h47,'xlabel');

set(h49,...
'Parent',h47,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[0.500000476837158 -0.150420168067227 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','top',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h50 = get(h47,'ylabel');

set(h50,...
'Parent',h47,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[-0.0173228346456693 0.500000476837158 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',90,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h51 = get(h47,'zlabel');

set(h51,...
'Parent',h47,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[0 0 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',10,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','left',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','middle',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','off',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

appdata = [];
appdata.lastValidTag = 'axes_PlotIP3input';

h52 = axes(...
'Parent',h41,...
'FontUnits',get(0,'defaultaxesFontUnits'),...
'Units',get(0,'defaultaxesUnits'),...
'CameraPosition',[0.5 0.5 9.16025403784439],...
'CameraPositionMode',get(0,'defaultaxesCameraPositionMode'),...
'CameraTarget',[0.5 0.5 0.5],...
'CameraTargetMode',get(0,'defaultaxesCameraTargetMode'),...
'CameraViewAngle',6.60861036031192,...
'CameraViewAngleMode',get(0,'defaultaxesCameraViewAngleMode'),...
'AmbientLightColor',get(0,'defaultaxesAmbientLightColor'),...
'Position',[0.19375 0.77342628461104 0.746875 0.0922098569157394],...
'ActivePositionProperty','position',...
'ActivePositionPropertyMode',get(0,'defaultaxesActivePositionPropertyMode'),...
'LooseInset',[0.264366772582842 0.2792384406165 0.193191103041307 0.190389845874887],...
'LooseInsetMode',get(0,'defaultaxesLooseInsetMode'),...
'PlotBoxAspectRatio',[1 0.232283464566929 0.232283464566929],...
'PlotBoxAspectRatioMode',get(0,'defaultaxesPlotBoxAspectRatioMode'),...
'GridColor',[0.941176470588235 0.941176470588235 0.941176470588235],...
'MinorGridColor',[0.941176470588235 0.941176470588235 0.941176470588235],...
'XColor',[0.941176470588235 0.941176470588235 0.941176470588235],...
'XTick',[],...
'XTickLabel',blanks(0),...
'XTickLabelsMode','manual',...
'YColor',[0.941176470588235 0.941176470588235 0.941176470588235],...
'YTick',[],...
'YTickLabel',blanks(0),...
'YTickLabelsMode','manual',...
'Color',[0.941176470588235 0.941176470588235 0.941176470588235],...
'SortMethod','childorder',...
'SortMethodMode',get(0,'defaultaxesSortMethodMode'),...
'CameraMode',get(0,'defaultaxesCameraMode'),...
'DataSpaceMode',get(0,'defaultaxesDataSpaceMode'),...
'ColorSpaceMode',get(0,'defaultaxesColorSpaceMode'),...
'DecorationContainerMode',get(0,'defaultaxesDecorationContainerMode'),...
'ChildContainerMode',get(0,'defaultaxesChildContainerMode'),...
'ZGridHandleMode',get(0,'defaultaxesZGridHandleMode'),...
'XAxisMode',get(0,'defaultaxesXAxisMode'),...
'XBaselineMode',get(0,'defaultaxesXBaselineMode'),...
'YAxisMode',get(0,'defaultaxesYAxisMode'),...
'YBaselineMode',get(0,'defaultaxesYBaselineMode'),...
'ZAxisMode',get(0,'defaultaxesZAxisMode'),...
'ZBaselineMode',get(0,'defaultaxesZBaselineMode'),...
'AmbientLightSourceMode',get(0,'defaultaxesAmbientLightSourceMode'),...
'ZGrid','on',...
'Box',get(0,'defaultaxesBox'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','axes_PlotIP3input',...
'ParentMode','manual');

h53 = get(h52,'title');

set(h53,...
'Parent',h52,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0 0 0],...
'ColorMode','auto',...
'Position',[0.500000726519607 1.02330508474576 0.499999999999998],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',11,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','bold',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','Axes Title',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h54 = get(h52,'xlabel');

set(h54,...
'Parent',h52,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.941176470588235 0.941176470588235 0.941176470588235],...
'ColorMode','auto',...
'Position',[0.500000476837158 -0.0677966101694896 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',11,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','top',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h55 = get(h52,'ylabel');

set(h55,...
'Parent',h52,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.941176470588235 0.941176470588235 0.941176470588235],...
'ColorMode','auto',...
'Position',[-0.015748031496063 0.50000047683716 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',90,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',11,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h56 = get(h52,'zlabel');

set(h56,...
'Parent',h52,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[0 0 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',10,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','left',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','middle',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','off',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

appdata = [];
appdata.lastValidTag = 'pushbutton_UpdateIP3EvokedTraces';

h57 = uicontrol(...
'Parent',h41,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Update IP3-Dependent Response',...
'Style',get(0,'defaultuicontrolStyle'),...
'Position',[0.188257940327238 0.94854052079116 0.741265640038498 0.0328160641459874],...
'BackgroundColor',[0.83921568627451 0.909803921568627 0.850980392156863],...
'Callback',@(hObject,eventdata)AstroCalMod('pushbutton_UpdateIP3EvokedTraces_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'Tag','pushbutton_UpdateIP3EvokedTraces',...
'FontSize',0.6,...
'FontWeight','bold');

appdata = [];
appdata.lastValidTag = 'uipanel1';

h58 = uipanel(...
'Parent',h41,...
'FontUnits','normalized',...get(0,'defaultuipanelFontUnits'),...
'Units',get(0,'defaultuipanelUnits'),...
'ForegroundColor',[0.231372549019608 0.443137254901961 0.337254901960784],...
'HighlightColor',[0.231372549019608 0.443137254901961 0.337254901960784],...
'ShadowColor',[0.231372549019608 0.443137254901961 0.337254901960784],...
'BorderType','none',...
'Title','IP3 Waveform Parameters',...
'Position',[0.0294153031761309 0.00937601832742498 0.96188041385948 0.198459054597162],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'ParentMode','manual',...
'Tag','uipanel1',...
'FontSize',0.11,...
'FontAngle',get(0,'defaultuipanelFontAngle'),...
'FontWeight','bold',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} );

appdata = [];
appdata.lastValidTag = 'RiseDur_entry';

h59 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','60',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.56613189001994 0.0682016461441991 0.100891211911999 0.191601866251944],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'Callback',@(hObject,eventdata)AstroCalMod('RiseDur_entry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('RiseDur_entry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','RiseDur_entry',...
'UserData',[],...
'FontSize',0.57,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'text9';

h60 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','Rise Dur. (s)',...
'Style','text',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.507389177230078 0.289578472186655 0.219662387703266 0.111283912217038],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',[0.105882352941176 0.309803921568627 0.207843137254902],...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text9',...
'UserData',[],...
'FontSize',0.89,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'RiseRate_entry';

h61 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','0.001',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.25823489404955 0.0682016461441991 0.169236871594321 0.191601866251944],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'Callback',@(hObject,eventdata)AstroCalMod('RiseRate_entry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('RiseRate_entry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','RiseRate_entry',...
'UserData',[],...
'FontSize',0.57,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'text8';

h62 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','Rise Rate (1/s)',...
'Style','text',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.216568551256741 0.289578472186655 0.262976097954614 0.111283912217038],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',[0.105882352941176 0.309803921568627 0.207843137254902],...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text8',...
'UserData',[],...
'FontSize',0.89,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'DecDur_entry';

h63 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','1500',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.794111474404124 0.0682016461441991 0.15621865070245 0.191601866251944],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'Callback',@(hObject,eventdata)AstroCalMod('DecDur_entry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('DecDur_entry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','DecDur_entry',...
'UserData',[],...
'FontSize',0.57,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'text7';

h64 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','Decay Dur. (s)',...
'Style','text',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.767271438738167 0.272457870307111 0.23513156993589 0.128404514096583],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',[0.105882352941176 0.309803921568627 0.207843137254902],...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text7',...
'UserData',[],...
'FontSize',0.76,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'PeakAmp_entry';

h65 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','0.35',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.0144646898798565 0.0682016461441991 0.14320042981058 0.191601866251944],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'Callback',@(hObject,eventdata)AstroCalMod('PeakAmp_entry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('PeakAmp_entry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','PeakAmp_entry',...
'UserData',[],...
'FontSize',0.57,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'IP3PeakAmp_text';

h66 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','Peak (uM)',...
'Style','text',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[-0.00309383644652487 0.272457870307111 0.188724023238017 0.128404514096583],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',[0.105882352941176 0.309803921568627 0.207843137254902],...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','IP3PeakAmp_text',...
'UserData',[],...
'FontSize',0.76,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'IP3input_entry';

h67 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','150',...
'Style','edit',...
'Value',15,...
'Position',[0.361255629749417 0.582043014728958 0.126927653695741 0.191601866251944],...
'Callback',@(hObject,eventdata)AstroCalMod('IP3input_entry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',[0.105882352941176 0.309803921568627 0.207843137254902],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('IP3input_entry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','IP3input_entry',...
'FontSize',0.57);

appdata = [];
appdata.lastValidTag = 'IP3Start_entry';

h68 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','IP3 Start Time (s):',...
'Style','text',...
'Value',15,...
'Position',[0 0.616879717683857 0.361255629749417 0.130637636080871],...
'BackgroundColor',[0.894117647058824 0.941176470588235 0.901960784313726],...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',[0.164705882352941 0.384313725490196 0.274509803921569],...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','IP3Start_entry',...
'UserData',[],...
'FontSize',0.85,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'pushbutton12';

h69 = uicontrol(...
'Parent',h58,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','RESET',...
'Style',get(0,'defaultuicontrolStyle'),...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.819571865443425 0.84 0.155963302752294 0.162393162393162],...
'BackgroundColor',get(0,'defaultuicontrolBackgroundColor'),...
'Callback',@(hObject,eventdata)AstroCalMod('pushbutton_resetIP3params_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',[0.313725490196078 0.313725490196078 0.313725490196078],...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','pushbutton12',...
'UserData',[],...
'FontSize',0.6,...
'fontname','default',...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight','bold');
%'Position',[0.819571865443425 0.810494052200213 0.155963302752294 0.162393162393162],...


appdata = [];
appdata.lastValidTag = 'TotalTime_entry';

h70 = uicontrol(...
'Parent',h41,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','600',...
'Style','edit',...
'Position',[0.715625 0.258293422871229 0.121875 0.0349761526232115],...
'BackgroundColor',[1 1 1],...
'Callback',@(hObject,eventdata)AstroCalMod('TotalTime_entry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('TotalTime_entry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','TotalTime_entry',...
'FontSize',0.57);

appdata = [];
appdata.lastValidTag = 'TotalTime_str';

h71 = uicontrol(...
'Parent',h41,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Total Simulation Duration (s):',...
'Style','text',...
'Position',[0.171875 0.253523947513518 0.54375 0.0349761526232115],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','TotalTime_str',...
'FontSize',0.55);

appdata = [];
appdata.lastValidTag = 'text15';

h72 = uicontrol(...
'Parent',h41,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Time (s)',...
'Style','text',...
'Position',[0.828125 0.295 0.1625 0.0302066772655008],...
'BackgroundColor',[0.941176470588235 0.941176470588235 0.941176470588235],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text15',...
'FontSize',0.57);
%'Position',[0.828125 0.298063775970646 0.1625 0.0302066772655008],...


appdata = [];
appdata.lastValidTag = 'text_legendIP3';

h73 = uicontrol(...
'Parent',h41,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','Legend',...
'Style','text',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.598224777728941 0.907758000430217 0.166650438169425 0.0313020000148352],...
'BackgroundColor',get(0,'defaultuicontrolBackgroundColor'),...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible','off',...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text_legendIP3',...
'UserData',[],...
'FontSize',0.56,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'pushbutton_Qip3';

h74 = uicontrol(...
'Parent',h41,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','?',...
'Style',get(0,'defaultuicontrolStyle'),...
'Position',[0.747019811808786 0.917148600434668 0.053566212268744 0.0281718000133515],...
'BackgroundColor',[1 1 1],...
'Callback',@(hObject,eventdata)AstroCalMod('pushbutton_Qip3_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',[0 0.447058823529412 0.741176470588235],...
'Visible','off',...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'Tag','pushbutton_Qip3',...
'FontSize',0.5,...
'fontname','default',...
'FontWeight','bold');

appdata = [];
appdata.lastValidTag = 'listbox_IP3';

h75 = uicontrol(...
'Parent',h41,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String',blanks(0),...
'Style','listbox',...
'Value',1,...
'Position',[0.626545957651588 0.864156355844335 0.311802213666987 0.055],...%0.0515681008008374],...
'BackgroundColor',[0.905882352941176 0.905882352941176 0.905882352941176],...
'Callback',@(hObject,eventdata)AstroCalMod('listbox_IP3_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible','off',...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('listbox_IP3_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','listbox_IP3',...
'UserData',[],...
'FontSize',0.31,...get(0,'defaultuicontrolFontSize'),...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'uipanel5';

h76 = uipanel(...
'Parent',h1,...
'FontUnits',get(0,'defaultuipanelFontUnits'),...
'Units',get(0,'defaultuipanelUnits'),...
'Title',blanks(0),...
'Position',[0.329113924050633 -0.0015552099533437 0.325219084712756 1],...
'ParentMode','manual',...
'Tag','uipanel5',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} );

appdata = [];
appdata.lastValidTag = 'axes_CPAFluor';

h77 = axes(...
'Parent',h76,...
'FontUnits',get(0,'defaultaxesFontUnits'),...
'Units',get(0,'defaultaxesUnits'),...
'CameraPosition',[0.5 0.5 9.16025403784439],...
'CameraPositionMode',get(0,'defaultaxesCameraPositionMode'),...
'CameraTarget',[0.5 0.5 0.5],...
'CameraTargetMode',get(0,'defaultaxesCameraTargetMode'),...
'CameraViewAngle',6.60861036031192,...
'CameraViewAngleMode',get(0,'defaultaxesCameraViewAngleMode'),...
'Position',[0.17515923566879 0.353687573240183 0.738853503184714 0.186009538950715],...
'ActivePositionProperty','position',...
'ActivePositionPropertyMode',get(0,'defaultaxesActivePositionPropertyMode'),...
'LooseInset',[0.264366772582842 0.2792384406165 0.193191103041307 0.190389845874887],...
'LooseInsetMode',get(0,'defaultaxesLooseInsetMode'),...
'PlotBoxAspectRatio',[1 0.481781376518219 0.481781376518219],...
'PlotBoxAspectRatioMode',get(0,'defaultaxesPlotBoxAspectRatioMode'),...
'FontSize',12,...
'XTick',[0 0.2 0.4 0.6 0.8 1],...
'XTickMode',get(0,'defaultaxesXTickMode'),...
'XTickLabel',{  '0'; '0.2'; '0.4'; '0.6'; '0.8'; '1' },...
'XTickLabelMode',get(0,'defaultaxesXTickLabelMode'),...
'XMinorTick',get(0,'defaultaxesXMinorTick'),...
'YTick',[],...
'YTickLabel',blanks(0),...
'YTickLabelsMode','manual',...
'SortMethod','childorder',...
'SortMethodMode',get(0,'defaultaxesSortMethodMode'),...
'CameraMode',get(0,'defaultaxesCameraMode'),...
'DataSpaceMode',get(0,'defaultaxesDataSpaceMode'),...
'ColorSpaceMode',get(0,'defaultaxesColorSpaceMode'),...
'DecorationContainerMode',get(0,'defaultaxesDecorationContainerMode'),...
'ChildContainerMode',get(0,'defaultaxesChildContainerMode'),...
'ZGridHandleMode',get(0,'defaultaxesZGridHandleMode'),...
'XAxisMode',get(0,'defaultaxesXAxisMode'),...
'XBaselineMode',get(0,'defaultaxesXBaselineMode'),...
'YAxisMode',get(0,'defaultaxesYAxisMode'),...
'YBaselineMode',get(0,'defaultaxesYBaselineMode'),...
'ZAxisMode',get(0,'defaultaxesZAxisMode'),...
'ZBaselineMode',get(0,'defaultaxesZBaselineMode'),...
'AmbientLightSourceMode',get(0,'defaultaxesAmbientLightSourceMode'),...
'XMinorGrid',get(0,'defaultaxesXMinorGrid'),...
'ZGrid','on',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','axes_CPAFluor',...
'ParentMode','manual');

h78 = get(h77,'title');

set(h78,...
'Parent',h77,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0 0 0],...
'ColorMode','auto',...
'Position',[0.500000704637906 1.01386554621849 0.5],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','bold',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','Axes Title',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h79 = get(h77,'xlabel');

set(h79,...
'Parent',h77,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[0.500000476837158 -0.150420168067227 1.77635683940025e-15],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','top',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h80 = get(h77,'ylabel');

set(h80,...
'Parent',h77,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[-0.0178137651821863 0.500000476837158 1.77635683940025e-15],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',90,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h81 = get(h77,'zlabel');

set(h81,...
'Parent',h77,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[0 0 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',10,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','left',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','middle',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','off',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

appdata = [];
appdata.lastValidTag = 'CPATimeLine_axes';

h82 = axes(...
'Parent',h76,...
'FontUnits',get(0,'defaultaxesFontUnits'),...
'Units',get(0,'defaultaxesUnits'),...
'CameraPosition',[0.5 0.5 9.16025403784439],...
'CameraPositionMode',get(0,'defaultaxesCameraPositionMode'),...
'CameraTarget',[0.5 0.5 0.5],...
'CameraTargetMode',get(0,'defaultaxesCameraTargetMode'),...
'CameraViewAngle',6.60861036031192,...
'CameraViewAngleMode',get(0,'defaultaxesCameraViewAngleMode'),...
'AmbientLightColor',get(0,'defaultaxesAmbientLightColor'),...
'Position',[0.168789808917197 0.76863192936101 0.742038216560509 0.0461049284578698],...
'ActivePositionProperty','position',...
'ActivePositionPropertyMode',get(0,'defaultaxesActivePositionPropertyMode'),...
'LooseInset',[0.13 0.11 0.095 0.075],...
'LooseInsetMode',get(0,'defaultaxesLooseInsetMode'),...
'PlotBoxAspectRatio',[1 0.119191919191919 0.119191919191919],...
'PlotBoxAspectRatioMode',get(0,'defaultaxesPlotBoxAspectRatioMode'),...
'GridColor',[1 0 0],...
'XAxisLocation',get(0,'defaultaxesXAxisLocation'),...
'XColor',[0.941176470588235 0.941176470588235 0.941176470588235],...
'XTick',[],...
'XTickLabel',{  '0'; '0.2'; '0.4'; '0.6'; '0.8'; '1' },...
'XTickLabelsMode','manual',...
'YAxisLocation',get(0,'defaultaxesYAxisLocation'),...
'YColor',[0.941176470588235 0.941176470588235 0.941176470588235],...
'YTick',[],...
'ZColor',[1 1 1],...
'BoxStyle','full',...
'Color',[0.941176470588235 0.941176470588235 0.941176470588235],...
'SortMethod','childorder',...
'SortMethodMode',get(0,'defaultaxesSortMethodMode'),...
'CameraMode',get(0,'defaultaxesCameraMode'),...
'DataSpaceMode',get(0,'defaultaxesDataSpaceMode'),...
'ColorSpaceMode',get(0,'defaultaxesColorSpaceMode'),...
'DecorationContainerMode',get(0,'defaultaxesDecorationContainerMode'),...
'ChildContainerMode',get(0,'defaultaxesChildContainerMode'),...
'XAxisMode',get(0,'defaultaxesXAxisMode'),...
'XBaselineMode',get(0,'defaultaxesXBaselineMode'),...
'YAxisMode',get(0,'defaultaxesYAxisMode'),...
'YBaselineMode',get(0,'defaultaxesYBaselineMode'),...
'ZAxisMode',get(0,'defaultaxesZAxisMode'),...
'ZBaselineMode',get(0,'defaultaxesZBaselineMode'),...
'AmbientLightSourceMode',get(0,'defaultaxesAmbientLightSourceMode'),...
'XGrid',get(0,'defaultaxesXGrid'),...
'YGrid',get(0,'defaultaxesYGrid'),...
'Box',get(0,'defaultaxesBox'),...
'ButtonDownFcn',@(hObject,eventdata)AstroCalMod('CPATimeLine_axes_ButtonDownFcn',hObject,eventdata,guidata(hObject)),...
'Tag','CPATimeLine_axes',...
'ParentMode','manual',...
'Visible',get(0,'defaultaxesVisible'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} );

h83 = get(h82,'title');

set(h83,...
'Parent',h82,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0 0 0],...
'ColorMode','auto',...
'Position',[0.500000696471243 1.04661016949153 0.499999999999998],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontUnitsMode','auto',...
'FontSize',11,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','bold',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'UnitsMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','Axes Title',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h84 = get(h82,'xlabel');

set(h84,...
'Parent',h82,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.941176470588235 0.941176470588235 0.941176470588235],...
'ColorMode','auto',...
'Position',[0.500000476837158 -0.135593220338983 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontUnitsMode','auto',...
'FontSize',11,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','top',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'UnitsMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h85 = get(h82,'ylabel');

set(h85,...
'Parent',h82,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.941176470588235 0.941176470588235 0.941176470588235],...
'ColorMode','auto',...
'Position',[-0.0161616161616162 0.500000476837158 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',90,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontUnitsMode','auto',...
'FontSize',11,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'UnitsMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h86 = get(h82,'zlabel');

set(h86,...
'Parent',h82,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[1 1 1],...
'ColorMode','auto',...
'Position',[0 0 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontUnitsMode','auto',...
'FontSize',10,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','left',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','middle',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'UnitsMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','off',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

appdata = [];
appdata.lastValidTag = 'axes_CPACaConc';

h87 = axes(...
'Parent',h76,...
'FontUnits',get(0,'defaultaxesFontUnits'),...
'Units',get(0,'defaultaxesUnits'),...
'CameraPosition',[0.5 0.5 9.16025403784439],...
'CameraPositionMode',get(0,'defaultaxesCameraPositionMode'),...
'CameraTarget',[0.5 0.5 0.5],...
'CameraTargetMode',get(0,'defaultaxesCameraTargetMode'),...
'CameraViewAngle',6.60861036031192,...
'CameraViewAngleMode',get(0,'defaultaxesCameraViewAngleMode'),...
'Position',[0.171974522292994 0.571493614575637 0.738853503184714 0.186009538950716],...
'ActivePositionProperty','position',...
'ActivePositionPropertyMode',get(0,'defaultaxesActivePositionPropertyMode'),...
'LooseInset',[0.264366772582842 0.2792384406165 0.193191103041307 0.190389845874887],...
'LooseInsetMode',get(0,'defaultaxesLooseInsetMode'),...
'PlotBoxAspectRatio',[1 0.482758620689655 0.482758620689655],...
'PlotBoxAspectRatioMode',get(0,'defaultaxesPlotBoxAspectRatioMode'),...
'FontSize',12,...
'XTick',[],...
'YTick',[],...
'SortMethod','childorder',...
'SortMethodMode',get(0,'defaultaxesSortMethodMode'),...
'CameraMode',get(0,'defaultaxesCameraMode'),...
'DataSpaceMode',get(0,'defaultaxesDataSpaceMode'),...
'ColorSpaceMode',get(0,'defaultaxesColorSpaceMode'),...
'DecorationContainerMode',get(0,'defaultaxesDecorationContainerMode'),...
'ChildContainerMode',get(0,'defaultaxesChildContainerMode'),...
'ZGridHandleMode',get(0,'defaultaxesZGridHandleMode'),...
'XAxisMode',get(0,'defaultaxesXAxisMode'),...
'XBaselineMode',get(0,'defaultaxesXBaselineMode'),...
'YAxisMode',get(0,'defaultaxesYAxisMode'),...
'YBaselineMode',get(0,'defaultaxesYBaselineMode'),...
'ZAxisMode',get(0,'defaultaxesZAxisMode'),...
'ZBaselineMode',get(0,'defaultaxesZBaselineMode'),...
'AmbientLightSourceMode',get(0,'defaultaxesAmbientLightSourceMode'),...
'ZGrid','on',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','axes_CPACaConc',...
'ParentMode','manual');
% 'YTickLabel',blanks(0),...
% 'YTickLabelsMode','manual',...

%h87.FontUnits='normalized';
% h87.FontSize=0.6;


h88 = get(h87,'title');

set(h88,...
'Parent',h87,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0 0 0],...
'ColorMode','auto',...
'Position',[0.500000701231115 1.01386554621849 0.499999999999998],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','bold',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','Axes Title',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h89 = get(h87,'xlabel');

set(h89,...
'Parent',h87,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[0.500000476837158 -0.0369747899159671 -1.77635683940025e-15],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','top',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h90 = get(h87,'ylabel');

set(h90,...
'Parent',h87,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[-0.0178498985801217 0.500000476837157 -1.77635683940025e-15],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',90,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',13.2,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','center',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','bottom',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','back',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','on',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

h91 = get(h87,'zlabel');

set(h91,...
'Parent',h87,...
'Units','data',...
'FontUnits','points',...
'DecorationContainer',[],...
'DecorationContainerMode','auto',...
'Color',[0.15 0.15 0.15],...
'ColorMode','auto',...
'Position',[0 0 0],...
'PositionMode','auto',...
'Interpreter','tex',...
'InterpreterMode','auto',...
'Rotation',0,...
'RotationMode','auto',...
'fontname','default',...
'FontNameMode','auto',...
'FontSize',10,...
'FontSizeMode','auto',...
'FontAngle','normal',...
'FontAngleMode','auto',...
'FontWeight','normal',...
'FontWeightMode','auto',...
'HorizontalAlignment','left',...
'HorizontalAlignmentMode','auto',...
'VerticalAlignment','middle',...
'VerticalAlignmentMode','auto',...
'EdgeColor','none',...
'EdgeColorMode','auto',...
'LineStyle','-',...
'LineStyleMode','auto',...
'LineWidth',0.5,...
'LineWidthMode','auto',...
'BackgroundColor','none',...
'BackgroundColorMode','auto',...
'Margin',3,...
'MarginMode','auto',...
'Clipping','off',...
'ClippingMode','auto',...
'Layer','middle',...
'LayerMode','auto',...
'FontSmoothing','on',...
'FontSmoothingMode','auto',...
'IncludeRenderer','on',...
'IsContainer','off',...
'IsContainerMode','auto',...
'HG1EraseMode','auto',...
'BusyAction','queue',...
'Interruptible','on',...
'HitTest','on',...
'HitTestMode','auto',...
'PickableParts','visible',...
'PickablePartsMode','auto',...
'XLimInclude','on',...
'XLimIncludeMode','auto',...
'YLimInclude','on',...
'YLimIncludeMode','auto',...
'ZLimInclude','on',...
'ZLimIncludeMode','auto',...
'CLimInclude','on',...
'CLimIncludeMode','auto',...
'ALimInclude','on',...
'ALimIncludeMode','auto',...
'Description','AxisRulerBase Label',...
'DescriptionMode','auto',...
'Visible','off',...
'VisibleMode','auto',...
'Serializable','on',...
'SerializableMode','auto',...
'HandleVisibility','off',...
'HandleVisibilityMode','auto',...
'TransformForPrintFcnImplicitInvoke','on',...
'TransformForPrintFcnImplicitInvokeMode','auto');

appdata = [];
appdata.lastValidTag = 'UpdateCPA_pushbutton';

h92 = uicontrol(...
'Parent',h76,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Update Calcium Store/Entry Response',...
'Style',get(0,'defaultuicontrolStyle'),...
'Position',[0.108024691358025 0.950665971066666 0.805555555555556 0.0333863275039745],...
'BackgroundColor',[0.929411764705882 0.694117647058824 0.125490196078431],...
'Callback',@(hObject,eventdata)AstroCalMod('UpdateCPA_pushbutton_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','UpdateCPA_pushbutton',...
'FontSize',0.6,...
'FontWeight','bold');

appdata = [];
appdata.lastValidTag = 'CPASimTime_entry';

h93 = uicontrol(...
'Parent',h76,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','1800',...
'Style','edit',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.700636942675159 0.259858677645796 0.121019108280255 0.0349761526232115],...
'BackgroundColor',[1 1 1],...
'Callback',@(hObject,eventdata)AstroCalMod('CPASimTime_entry_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('CPASimTime_entry_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','CPASimTime_entry',...
'UserData',[],...
'FontSize',0.56,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'text18';

h94 = uicontrol(...
'Parent',h76,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Total Simulation Duration (s):',...
'Style','text',...
'Position',[0.162420382165605 0.255089202288085 0.538216560509554 0.0349761526232115],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text18',...
'FontSize',0.56);

appdata = [];
appdata.lastValidTag = 'text19';

h95 = uicontrol(...
'Parent',h76,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','Time (s)',...
'Style','text',...
'Position',[0.805732484076433 0.295 0.159235668789809 0.0302066772655008],...
'BackgroundColor',[0.941176470588235 0.941176470588235 0.941176470588235],...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text19',...
'FontSize',0.57);
%'Position',[0.805732484076433 0.299629185519037 0.159235668789809 0.0302066772655008],...

appdata = [];
appdata.lastValidTag = 'uipanel6';

h96 = uipanel(...
'Parent',h76,...
'FontUnits','normalized',...get(0,'defaultuipanelFontUnits'),...
'Units',get(0,'defaultuipanelUnits'),...
'ForegroundColor',[0.870588235294118 0.490196078431373 0],...
'HighlightColor',[1 0.968627450980392 0.92156862745098],...
'ShadowColor',[1 0.968627450980392 0.92156862745098],...
'Title','Experiment Timeline',...
'Position',[0.0222929936305732 0.00802330095166981 0.95859872611465 0.197138314785374],...
'BackgroundColor',[1 0.968627450980392 0.92156862745098],...
'ParentMode','manual',...
'Tag','uipanel6',...
'FontSize',0.11,...
'FontAngle',get(0,'defaultuipanelFontAngle'),...
'FontWeight','bold',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} );

appdata = [];
appdata.lastValidTag = 'text35';

h97 = uicontrol(...
'Parent',h96,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String',{  'CPA'; 'Start Time (s):' },...
'Style','text',...
'Position',[0.36439269751239 0.358209871490546 0.273294523134292 0.259331259720062],...
'BackgroundColor',[1 0.968627450980392 0.92156862745098],...
'Children',[],...
'ForegroundColor',[0.870588235294118 0.490196078431373 0],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text35',...
'FontSize',0.42,...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'text34';

h98 = uicontrol(...
'Parent',h96,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String',{  'Calcium Free'; 'End Time (s):' },...
'Style','text',...
'Position',[0.708541356274092 0.340324957027093 0.273294523134292 0.277216174183515],...
'BackgroundColor',[1 0.968627450980392 0.92156862745098],...
'Children',[],...
'ForegroundColor',[0.635294117647059 0.0784313725490196 0.184313725490196],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text34',...
'FontSize',0.39);

appdata = [];
appdata.lastValidTag = 'text33';

h99 = uicontrol(...
'Parent',h96,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String',{  'Calcium Free'; 'Start Time (s):' },...
'Style','text',...
'Position',[0.0202440387506883 0.340324957027093 0.273294523134292 0.277216174183515],...
'BackgroundColor',[1 0.968627450980392 0.92156862745098],...
'Children',[],...
'ForegroundColor',[0.635294117647059 0.0784313725490196 0.184313725490196],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'Tag','text33',...
'FontSize',0.39);

appdata = [];
appdata.lastValidTag = 'edit_CPAStart';

h100 = uicontrol(...
'Parent',h96,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','600',...
'Style','edit',...
'Value',15,...
'Position',[0.441994846056695 0.116763526233936 0.131586251879474 0.196734059097978],...
'Callback',@(hObject,eventdata)AstroCalMod('edit_CPAStart_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',[0.870588235294118 0.490196078431373 0],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('edit_CPAStart_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','edit_CPAStart',...
'FontSize',0.56);

appdata = [];
appdata.lastValidTag = 'edit_CaFreeEnd';

h101 = uicontrol(...
'Parent',h96,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','1500',...
'Style','edit',...
'Value',15,...
'Position',[0.786143504818397 0.116763526233936 0.128212245421026 0.196734059097978],...
'Callback',@(hObject,eventdata)AstroCalMod('edit_CaFreeEnd_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',[0.635294117647059 0.0784313725490196 0.184313725490196],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('edit_CaFreeEnd_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','edit_CaFreeEnd',...
'FontSize',0.56);

appdata = [];
appdata.lastValidTag = 'edit_CaFreeStart';

h102 = uicontrol(...
'Parent',h96,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','300',...
'Style','edit',...
'Value',15,...
'Position',[0.0978461872949936 0.116763526233936 0.128212245421026 0.196734059097978],...
'Callback',@(hObject,eventdata)AstroCalMod('edit_CaFreeStart_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',[0.635294117647059 0.0784313725490196 0.184313725490196],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('edit_CaFreeStart_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','edit_CaFreeStart',...
'FontSize',0.56);

appdata = [];
appdata.lastValidTag = 'pushbutton_resetCPAparams';

h103 = uicontrol(...
'Parent',h76,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','RESET',...
'Style',get(0,'defaultuicontrolStyle'),...
'Position',[0.814722781229037 0.155 0.152760521480444 0.0296877885671517],...
'Callback',@(hObject,eventdata)AstroCalMod('pushbutton_resetCPAparams_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',[0.313725490196078 0.313725490196078 0.313725490196078],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','pushbutton_resetCPAparams',...
'FontSize',0.6,...
'fontname','default',...
'FontWeight','bold');

appdata = [];
appdata.lastValidTag = 'text_legendCPA';

h104 = uicontrol(...
'Parent',h76,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','Legend',...
'Style','text',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.563117216437717 0.906258808891999 0.170732347536967 0.0312503037548966],...
'BackgroundColor',get(0,'defaultuicontrolBackgroundColor'),...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible','off',...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text_legendCPA',...
'UserData',[],...
'FontSize',0.56,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'pushbutton_Qcpa';

h105 = uicontrol(...
'Parent',h76,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','?',...
'Style',get(0,'defaultuicontrolStyle'),...
'Position',[0.715877737918161 0.915633900018468 0.0539154781695687 0.0281252733794068],...
'BackgroundColor',[1 1 1],...
'Callback',@(hObject,eventdata)AstroCalMod('pushbutton_Qcpa_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',[0 0.447058823529412 0.741176470588235],...
'Visible','off',...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','pushbutton_Qcpa',...
'FontSize',0.5,...get(0,'defaultuicontrolFontSize'),...
'fontname','default',...
'FontWeight','bold');

appdata = [];
appdata.lastValidTag = 'listbox_CPA';

h106 = uicontrol(...
'Parent',h76,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment',get(0,'defaultuicontrolHorizontalAlignment'),...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String',blanks(0),...
'Style','listbox',...
'Value',1,...
'Position',[0.593070259865255 0.862508383635144 0.317502260331904 0.055],...%0.0515630011955793],...
'BackgroundColor',[0.905882352941176 0.905882352941176 0.905882352941176],...
'Callback',@(hObject,eventdata)AstroCalMod('listbox_CPA_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible','off',...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('listbox_CPA_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','listbox_CPA',...
'UserData',[],...
'FontSize',0.31,...get(0,'defaultuicontrolFontSize'),...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'pushbutton_Save';

h107 = uicontrol(...
'Parent',h1,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','SAVE',...
'Style',get(0,'defaultuicontrolStyle'),...
'Position',[0.910020449897751 0.0963665086887836 0.0705521472392638 0.033175355450237],...
'Callback',@(hObject,eventdata)AstroCalMod('pushbutton_Save_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'Tag','pushbutton_Save',...
'FontSize',0.57);

appdata = [];
appdata.lastValidTag = 'text12';

h108 = uicontrol(...
'Parent',h1,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'HorizontalAlignment','left',...
'ListboxTop',get(0,'defaultuicontrolListboxTop'),...
'Max',get(0,'defaultuicontrolMax'),...
'Min',get(0,'defaultuicontrolMin'),...
'SliderStep',get(0,'defaultuicontrolSliderStep'),...
'String','Save all traces and parameters:',...
'Style','text',...
'Value',get(0,'defaultuicontrolValue'),...
'Position',[0.677914110429448 0.137440758293839 0.192229038854806 0.0268562401263823],...
'BackgroundColor',get(0,'defaultuicontrolBackgroundColor'),...
'Callback',blanks(0),...
'Children',[],...
'ForegroundColor',get(0,'defaultuicontrolForegroundColor'),...
'Enable',get(0,'defaultuicontrolEnable'),...
'TooltipString',blanks(0),...
'Visible',get(0,'defaultuicontrolVisible'),...
'KeyPressFcn',blanks(0),...
'KeyReleaseFcn',blanks(0),...
'ParentMode','manual',...
'HandleVisibility',get(0,'defaultuicontrolHandleVisibility'),...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','text12',...
'UserData',[],...
'FontSize',0.7,...
'FontName',get(0,'defaultuicontrolFontName'),...
'FontAngle',get(0,'defaultuicontrolFontAngle'),...
'FontWeight',get(0,'defaultuicontrolFontWeight'));

appdata = [];
appdata.lastValidTag = 'popupmenu_SaveAs';

h109 = uicontrol(...
'Parent',h1,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String',{'Select Format'; 'MAT file'; 'Text file'; 'Excel file'; 'CSV file'},...
'Style','popupmenu',...
'Value',1,...
'ValueMode',get(0,'defaultuicontrolValueMode'),...
'Position',[0.779141104294479 0.0837282780410742 0.125766871165644 0.042654028436019],...
'Callback',@(hObject,eventdata)AstroCalMod('popupmenu_SaveAs_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, @(hObject,eventdata)AstroCalMod('popupmenu_SaveAs_CreateFcn',hObject,eventdata,guidata(hObject)), appdata} ,...
'Tag','popupmenu_SaveAs',...
'FontSize',0.38);

appdata = [];
appdata.lastValidTag = 'pushbutton3';

h110 = uicontrol(...
'Parent',h1,...
'FontUnits','normalized',...get(0,'defaultuicontrolFontUnits'),...
'Units','normalized',...
'String','HELP',...
'Style',get(0,'defaultuicontrolStyle'),...
'Position',[0.910020449897751 0.018957345971564 0.0705521472392638 0.033175355450237],...
'Callback',@(hObject,eventdata)AstroCalMod('pushbutton3_Callback',hObject,eventdata,guidata(hObject)),...
'Children',[],...
'KeyPressFcn',blanks(0),...
'ParentMode','manual',...
'CreateFcn', {@local_CreateFcn, blanks(0), appdata} ,...
'DeleteFcn',blanks(0),...
'ButtonDownFcn',blanks(0),...
'Tag','pushbutton3',...
'FontSize',0.57);


hsingleton = h1;


% --- Set application data first then calling the CreateFcn. 
function local_CreateFcn(hObject, eventdata, createfcn, appdata)

if ~isempty(appdata)
   names = fieldnames(appdata);
   for i=1:length(names)
       name = char(names(i));
       setappdata(hObject, name, getfield(appdata,name));
   end
end

if ~isempty(createfcn)
   if isa(createfcn,'function_handle')
       createfcn(hObject, eventdata);
   else
       eval(createfcn);
   end
end


% --- Handles default GUIDE GUI creation and callback dispatch
function varargout = gui_mainfcn(gui_State, varargin)

gui_StateFields =  {'gui_Name'
    'gui_Singleton'
    'gui_OpeningFcn'
    'gui_OutputFcn'
    'gui_LayoutFcn'
    'gui_Callback'};
gui_Mfile = '';
for i=1:length(gui_StateFields)
    if ~isfield(gui_State, gui_StateFields{i})
        error(message('MATLAB:guide:StateFieldNotFound', gui_StateFields{ i }, gui_Mfile));
    elseif isequal(gui_StateFields{i}, 'gui_Name')
        gui_Mfile = [gui_State.(gui_StateFields{i}), '.m'];
    end
end

numargin = length(varargin);

if numargin == 0
    % AstroCalMod
    % create the GUI only if we are not in the process of loading it
    % already
    gui_Create = true;
elseif local_isInvokeActiveXCallback(gui_State, varargin{:})
    % AstroCalMod(ACTIVEX,...)
    vin{1} = gui_State.gui_Name;
    vin{2} = [get(varargin{1}.Peer, 'Tag'), '_', varargin{end}];
    vin{3} = varargin{1};
    vin{4} = varargin{end-1};
    vin{5} = guidata(varargin{1}.Peer);
    feval(vin{:});
    return;
elseif local_isInvokeHGCallback(gui_State, varargin{:})
    % AstroCalMod('CALLBACK',hObject,eventData,handles,...)
    gui_Create = false;
else
    % AstroCalMod(...)
    % create the GUI and hand varargin to the openingfcn
    gui_Create = true;
end

if ~gui_Create
    % In design time, we need to mark all components possibly created in
    % the coming callback evaluation as non-serializable. This way, they
    % will not be brought into GUIDE and not be saved in the figure file
    % when running/saving the GUI from GUIDE.
    designEval = false;
    if (numargin>1 && ishghandle(varargin{2}))
        fig = varargin{2};
        while ~isempty(fig) && ~ishghandle(fig,'figure')
            fig = get(fig,'parent');
        end
        
        designEval = isappdata(0,'CreatingGUIDEFigure') || (isscalar(fig)&&isprop(fig,'GUIDEFigure'));
    end
        
    if designEval
        beforeChildren = findall(fig);
    end
    
    % evaluate the callback now
    varargin{1} = gui_State.gui_Callback;
    if nargout
        [varargout{1:nargout}] = feval(varargin{:});
    else       
        feval(varargin{:});
    end
    
    % Set serializable of objects created in the above callback to off in
    % design time. Need to check whether figure handle is still valid in
    % case the figure is deleted during the callback dispatching.
    if designEval && ishghandle(fig)
        set(setdiff(findall(fig),beforeChildren), 'Serializable','off');
    end
else
    if gui_State.gui_Singleton
        gui_SingletonOpt = 'reuse';
    else
        gui_SingletonOpt = 'new';
    end

    % Check user passing 'visible' P/V pair first so that its value can be
    % used by oepnfig to prevent flickering
    gui_Visible = 'auto';
    gui_VisibleInput = '';
    for index=1:2:length(varargin)
        if length(varargin) == index || ~ischar(varargin{index})
            break;
        end

        % Recognize 'visible' P/V pair
        len1 = min(length('visible'),length(varargin{index}));
        len2 = min(length('off'),length(varargin{index+1}));
        if ischar(varargin{index+1}) && strncmpi(varargin{index},'visible',len1) && len2 > 1
            if strncmpi(varargin{index+1},'off',len2)
                gui_Visible = 'invisible';
                gui_VisibleInput = 'off';
            elseif strncmpi(varargin{index+1},'on',len2)
                gui_Visible = 'visible';
                gui_VisibleInput = 'on';
            end
        end
    end
    
    % Open fig file with stored settings.  Note: This executes all component
    % specific CreateFunctions with an empty HANDLES structure.

    
    % Do feval on layout code in m-file if it exists
    gui_Exported = ~isempty(gui_State.gui_LayoutFcn);
    % this application data is used to indicate the running mode of a GUIDE
    % GUI to distinguish it from the design mode of the GUI in GUIDE. it is
    % only used by actxproxy at this time.   
    setappdata(0,genvarname(['OpenGuiWhenRunning_', gui_State.gui_Name]),1);
    if gui_Exported
        gui_hFigure = feval(gui_State.gui_LayoutFcn, gui_SingletonOpt);

        % make figure invisible here so that the visibility of figure is
        % consistent in OpeningFcn in the exported GUI case
        if isempty(gui_VisibleInput)
            gui_VisibleInput = get(gui_hFigure,'Visible');
        end
        set(gui_hFigure,'Visible','off')

        % openfig (called by local_openfig below) does this for guis without
        % the LayoutFcn. Be sure to do it here so guis show up on screen.
        movegui(gui_hFigure,'onscreen');
    else
        gui_hFigure = local_openfig(gui_State.gui_Name, gui_SingletonOpt, gui_Visible);
        % If the figure has InGUIInitialization it was not completely created
        % on the last pass.  Delete this handle and try again.
        if isappdata(gui_hFigure, 'InGUIInitialization')
            delete(gui_hFigure);
            gui_hFigure = local_openfig(gui_State.gui_Name, gui_SingletonOpt, gui_Visible);
        end
    end
    if isappdata(0, genvarname(['OpenGuiWhenRunning_', gui_State.gui_Name]))
        rmappdata(0,genvarname(['OpenGuiWhenRunning_', gui_State.gui_Name]));
    end

    % Set flag to indicate starting GUI initialization
    setappdata(gui_hFigure,'InGUIInitialization',1);

    % Fetch GUIDE Application options
    gui_Options = getappdata(gui_hFigure,'GUIDEOptions');
    % Singleton setting in the GUI M-file takes priority if different
    gui_Options.singleton = gui_State.gui_Singleton;

    if ~isappdata(gui_hFigure,'GUIOnScreen')
        % Adjust background color
        if gui_Options.syscolorfig
            set(gui_hFigure,'Color', get(0,'DefaultUicontrolBackgroundColor'));
        end

        % Generate HANDLES structure and store with GUIDATA. If there is
        % user set GUI data already, keep that also.
        data = guidata(gui_hFigure);
        handles = guihandles(gui_hFigure);
        if ~isempty(handles)
            if isempty(data)
                data = handles;
            else
                names = fieldnames(handles);
                for k=1:length(names)
                    data.(char(names(k)))=handles.(char(names(k)));
                end
            end
        end
        guidata(gui_hFigure, data);
    end

    % Apply input P/V pairs other than 'visible'
    for index=1:2:length(varargin)
        if length(varargin) == index || ~ischar(varargin{index})
            break;
        end

        len1 = min(length('visible'),length(varargin{index}));
        if ~strncmpi(varargin{index},'visible',len1)
            try set(gui_hFigure, varargin{index}, varargin{index+1}), catch break, end
        end
    end

    % If handle visibility is set to 'callback', turn it on until finished
    % with OpeningFcn
    gui_HandleVisibility = get(gui_hFigure,'HandleVisibility');
    if strcmp(gui_HandleVisibility, 'callback')
        set(gui_hFigure,'HandleVisibility', 'on');
    end

    feval(gui_State.gui_OpeningFcn, gui_hFigure, [], guidata(gui_hFigure), varargin{:});

    if isscalar(gui_hFigure) && ishghandle(gui_hFigure)
        % Handle the default callbacks of predefined toolbar tools in this
        % GUI, if any
        guidemfile('restoreToolbarToolPredefinedCallback',gui_hFigure); 
        
        % Update handle visibility
        set(gui_hFigure,'HandleVisibility', gui_HandleVisibility);

        % Call openfig again to pick up the saved visibility or apply the
        % one passed in from the P/V pairs
        if ~gui_Exported
            gui_hFigure = local_openfig(gui_State.gui_Name, 'reuse',gui_Visible);
        elseif ~isempty(gui_VisibleInput)
            set(gui_hFigure,'Visible',gui_VisibleInput);
        end
        if strcmpi(get(gui_hFigure, 'Visible'), 'on')
            figure(gui_hFigure);
            
            if gui_Options.singleton
                setappdata(gui_hFigure,'GUIOnScreen', 1);
            end
        end

        % Done with GUI initialization
        if isappdata(gui_hFigure,'InGUIInitialization')
            rmappdata(gui_hFigure,'InGUIInitialization');
        end

        % If handle visibility is set to 'callback', turn it on until
        % finished with OutputFcn
        gui_HandleVisibility = get(gui_hFigure,'HandleVisibility');
        if strcmp(gui_HandleVisibility, 'callback')
            set(gui_hFigure,'HandleVisibility', 'on');
        end
        gui_Handles = guidata(gui_hFigure);
    else
        gui_Handles = [];
    end

    if nargout
        [varargout{1:nargout}] = feval(gui_State.gui_OutputFcn, gui_hFigure, [], gui_Handles);
    else
        feval(gui_State.gui_OutputFcn, gui_hFigure, [], gui_Handles);
    end

    if isscalar(gui_hFigure) && ishghandle(gui_hFigure)
        set(gui_hFigure,'HandleVisibility', gui_HandleVisibility);
    end
end

function gui_hFigure = local_openfig(name, singleton, visible)

% openfig with three arguments was new from R13. Try to call that first, if
% failed, try the old openfig.
if nargin('openfig') == 2
    % OPENFIG did not accept 3rd input argument until R13,
    % toggle default figure visible to prevent the figure
    % from showing up too soon.
    gui_OldDefaultVisible = get(0,'defaultFigureVisible');
    set(0,'defaultFigureVisible','off');
    gui_hFigure = matlab.hg.internal.openfigLegacy(name, singleton);
    set(0,'defaultFigureVisible',gui_OldDefaultVisible);
else
    % Call version of openfig that accepts 'auto' option"
    gui_hFigure = matlab.hg.internal.openfigLegacy(name, singleton, visible);  
%     %workaround for CreateFcn not called to create ActiveX
%         peers=findobj(findall(allchild(gui_hFigure)),'type','uicontrol','style','text');    
%         for i=1:length(peers)
%             if isappdata(peers(i),'Control')
%                 actxproxy(peers(i));
%             end            
%         end
end

function result = local_isInvokeActiveXCallback(gui_State, varargin)

try
    result = ispc && iscom(varargin{1}) ...
             && isequal(varargin{1},gcbo);
catch
    result = false;
end

function result = local_isInvokeHGCallback(gui_State, varargin)

try
    fhandle = functions(gui_State.gui_Callback);
    result = ~isempty(findstr(gui_State.gui_Name,fhandle.file)) || ...
             (ischar(varargin{1}) ...
             && isequal(ishghandle(varargin{2}), 1) ...
             && (~isempty(strfind(varargin{1},[get(varargin{2}, 'Tag'), '_'])) || ...
                ~isempty(strfind(varargin{1}, '_CreateFcn'))) );
catch
    result = false;
end


